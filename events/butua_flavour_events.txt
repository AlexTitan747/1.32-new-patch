namespace = butua_flavour

country_event = {
    id = butua_flavour.1
    title = butua_flavour.1.t
    desc = butua_flavour.1.d
	picture = SHWEDAGON_PAGON_eventPicture

	fire_only_once = yes
	
	is_triggered_only = yes

	trigger = {
		tag = RZW
	}
	
	option = { #Stay Fetishist
		name = butua_flavour.1.a

        add_country_modifier = {
            name = "butua_stays_fetishist"
            duration = -1
        }
        add_stability = 1
		
		ai_chance = { #Keep AI as default religion
			factor = 100
		}
	}

	option = { #Convert to Sunni
		name = butua_flavour.1.b
		change_religion = sunni
        capital_scope = { change_religion = sunni }
        set_ruler_religion = sunni
        set_heir_religion = sunni
        set_consort_religion = sunni

        add_country_modifier = {
            name = "butua_converts_sunni"
            duration = 5475
        }

        ai_chance = {
			factor = 0
		}
	}
}

country_event = {
    id = butua_flavour.2
    title = butua_flavour.2.t
    desc = butua_flavour.2.d
	picture = SHWEDAGON_PAGON_eventPicture

	fire_only_once = yes
	
	is_triggered_only = yes

	trigger = {
		tag = RZW
	}
	
	option = { #India
		name = butua_flavour.2.a

		hidden_effect = {
			set_country_flag = butua_india_choice
			swap_non_generic_missions = yes
		}

	}

	option = { #China
		name = butua_flavour.2.b

		hidden_effect = {
			set_country_flag = butua_china_choice
			swap_non_generic_missions = yes
		}
	}

	option = { #Indonesia
		name = butua_flavour.2.c

		hidden_effect = {
			set_country_flag = butua_indonesia_choice
			swap_non_generic_missions = yes
		}
	}
}

country_event = {
    id = butua_flavour.3
    title = butua_flavour.3.t
    desc = butua_flavour.3.d
	picture = SHWEDAGON_PAGON_eventPicture

	fire_only_once = yes
	
	is_triggered_only = yes

	trigger = {
		tag = RZW
	}
	
	option = { #Faster Colonisation
		name = butua_flavour.3.a

		add_country_modifier = {
			name = "butua_colonise_the_cape"
			duration = 9125
		}
	}

	option = { #More Gold
		name = butua_flavour.3.b

		custom_tooltip = butua_find_more_gold_in_cape_tooltip
		set_country_flag = butua_more_gold_in_cape
	}
}

country_event = {
    id = butua_flavour.4
    title = butua_flavour.4.t
    desc = butua_flavour.4.d
	picture = SHWEDAGON_PAGON_eventPicture

	fire_only_once = yes
	
	is_triggered_only = yes

	trigger = {
		tag = RZW
	}
	
	option = { #Go it alone anyway
		name = butua_flavour.4.a

		clr_country_flag = butua_rival_eth
		set_country_flag = butua_fight_eth_alone
		hidden_effect = {
			swap_non_generic_missions = yes
		}
		custom_tooltip = buuta_go_it_alone_anyway
	}

	option = { 
		name = butua_flavour.4.b

		trigger = {
			any_country = {
				any_neighbor_country = {
					tag = ETH
				}
				NOT = { has_country_flag = no_help_for_but_against_eth }
			}
		}

		random_country = {
			limit = {
				any_neighbor_country = {
					tag = ETH
				}
				NOT = { has_country_flag = no_help_for_but_against_eth }
			}

			country_event = {
				id = butua_flavour.5
			}
		}
	}

	option = { 
		name = butua_flavour.4.c

		trigger = {
			any_country = {
				any_rival_country = {
					tag = ETH
				}
				NOT = { has_country_flag = no_help_for_but_against_eth }
			}
		}

		random_country = {
			limit = {
				any_rival_country = {
					tag = ETH
				}
				NOT = { has_country_flag = no_help_for_but_against_eth }
			}

			country_event = {
				id = butua_flavour.5
			}
		}
	}

	option = { 
		name = butua_flavour.4.d

		trigger = {
			any_country = {
				OR = {
					tag = MAM
					tag = OMA
					tag = TUR
					tag = MOR

					tag = SLU
					tag = ZRD
					tag = ARB
					tag = OME
					tag = EGY
				}
				NOT = { has_country_flag = no_help_for_but_against_eth }
				total_development = ETH
			}
		}

		random_country = {
			limit = {
				OR = {
					tag = MAM
					tag = OMA
					tag = TUR
					tag = MOR

					tag = SLU
					tag = ZRD
					tag = ARB
					tag = OME
					tag = EGY
				}
				NOT = { has_country_flag = no_help_for_but_against_eth }
				total_development = ETH
			}

			country_event = {
				id = butua_flavour.5
			}
		}
	}
}

country_event = { #Asked for support against Eth
    id = butua_flavour.5
    title = butua_flavour.5.t
    desc = butua_flavour.5.d
	picture = SHWEDAGON_PAGON_eventPicture
	
	is_triggered_only = yes

	trigger = {
		always = yes
	}
	
	option = { #Accept with claims
		name = butua_flavour.5.a

		trigger = {
			any_neighbor_country = {
				tag = ETH
			}
		}

		every_neighbor_province = { 
			limit = {
				owner = {
					tag = ETH
				}
			}
			area = {
				add_claim = ROOT
				set_province_flag = must_conquer_from_eth
			}
		}
		custom_tooltip = explanation_for_other_claims_tt
		save_event_target_as = help_butua_with_eth
		set_country_flag = must_dec_on_eth

		RZW = {
			country_event = {
				id = butua_flavour.8
			}
		}
	}

	option = { #Accept with Support
		name = butua_flavour.5.b

		custom_tooltip = explanation_for_support_tt
		save_event_target_as = help_butua_with_eth

		RZW = {
			country_event = {
				id = butua_flavour.7
			}
		}
	}

	option = { #Reject
		name = butua_flavour.5.c

		set_country_flag = no_help_for_but_against_eth

		RZW = {
			country_event = {
				id = butua_flavour.6
			}
		}
	}
}

country_event = { #They said no
    id = butua_flavour.6
    title = butua_flavour.6.t
    desc = butua_flavour.6.d
	picture = SHWEDAGON_PAGON_eventPicture
	
	is_triggered_only = yes

	trigger = {
		tag = RZW
	}
	
	option = { #Return to conquest
		name = butua_flavour.6.a

		clr_country_flag = butua_rival_eth
		set_country_flag = butua_fight_eth_alone
		hidden_effect = {
			swap_non_generic_missions = yes
		}
		custom_tooltip = buuta_go_it_alone_anyway
	}

	option = { #Try again
		name = butua_flavour.6.b

		country_event = {
			id = butua_flavour.4
		}
	}
}

country_event = { #Yes with support
    id = butua_flavour.7
    title = butua_flavour.7.t
    desc = butua_flavour.7.d
	picture = SHWEDAGON_PAGON_eventPicture
	
	is_triggered_only = yes

	trigger = {
		tag = RZW
	}
	
	option = { 
		name = butua_flavour.7.a
		custom_tooltip = yes_with_support_tt
	}
}

country_event = { #Yes with claims
    id = butua_flavour.8
    title = butua_flavour.8.t
    desc = butua_flavour.8.d
	picture = SHWEDAGON_PAGON_eventPicture
	
	is_triggered_only = yes

	trigger = {
		tag = RZW
	}
	
	option = { 
		name = butua_flavour.8.a
		custom_tooltip = yes_with_claims_tt
	}
}

country_event = { #Butua Requests our Aid
    id = butua_flavour.9
    title = butua_flavour.9.t
    desc = butua_flavour.9.d
	picture = SHWEDAGON_PAGON_eventPicture
	
	is_triggered_only = yes

	trigger = {
	}
	
	immediate = {
		hidden_effect = {
			export_to_variable = {
				which = manpowerToGiveButua
				value = manpower
				who = ROOT
			}

			export_to_variable = {
				which = moneyToGiveButua
				value = monthly_income
				who = ROOT
			}

			divide_variable = {
				which = manpowerToGiveButua
				value = 4
			}

			multiply_variable = {
				which = moneyToGiveButua
				value = 18
			}
		}
		
	}

	option = { 
		name = butua_flavour.9.a

		custom_tooltip = transfer_to_butua_tt

		transfer_treasury = {
            giver = ROOT
            taker = RZW
            variable = moneyToGiveButua
		}

		transfer_manpower = {
			giver = ROOT
			taker = RZW
			variable = manpowerToGiveButua
		}
	}
}

country_event = { #Aider requests Aid from Butua
    id = butua_flavour.10
    title = butua_flavour.10.t
    desc = butua_flavour.10.d
	picture = SHWEDAGON_PAGON_eventPicture
	
	is_triggered_only = yes

	trigger = {
	}
	
	immediate = {
		hidden_effect = {
			export_to_variable = {
				which = butuaGiveManpower
				value = manpower
				who = ROOT
			}

			export_to_variable = {
				which = butuaGiveMoney
				value = monthly_income
				who = ROOT
			}

			divide_variable = {
				which = butuaGiveManpower
				value = 4
			}

			multiply_variable = {
				which = butuaGiveMoney
				value = 18
			}
		}
	}

	option = { 
		name = butua_flavour.10.A

		custom_tooltip = transfer_from_butua_tt

		transfer_treasury = {
            giver = ROOT
            taker = event_target:help_butua_with_eth
            variable = butuaGiveMoney
		}

		transfer_manpower = {
			giver = ROOT
			taker = event_target:help_butua_with_eth
			variable = butuaGiveManpower
		}
		
	}
}

country_event = { #Failed to Attack Eth
    id = butua_flavour.11
    title = butua_flavour.11.t
    desc = butua_flavour.11.d
	picture = SHWEDAGON_PAGON_eventPicture

	trigger = {
		tag = event_target:help_butua_with_eth		
		had_country_flag = {
			flag = must_dec_on_eth
			days = 3650
		}
		has_country_flag = must_dec_on_eth
	}

	mean_time_to_happen = {
		months = 1
	}
	
	option = { 
		name = butua_flavour.11.a

		add_country_modifier = {
			name = failed_to_attack_eth
			duration = 5475
		}
	}
}

country_event = {
id = butua_flavour.12
    title = butua_flavour.12.t
    desc = butua_flavour.12.d
	picture = SHWEDAGON_PAGON_eventPicture

	trigger = {
		tag = event_target:help_butua_with_eth		
		has_country_flag = must_dec_on_eth
		any_owned_province = {
			has_province_flag = must_conquer_from_eth
		}
	}

	mean_time_to_happen = {
		months = 1
	}
	
	option = { 
		name = butua_flavour.12.a

		clr_country_flag = must_dec_on_eth

		add_prestige = 20
	}
}

country_event = { #Ethiopia Integrate Subjects
    id = butua_flavour.15
    title = butua_flavour.15.t
    desc = butua_flavour.15.d
	picture = SHWEDAGON_PAGON_eventPicture
	
	mean_time_to_happen = {
		months = 1
	}

	trigger = {
		tag = ETH
		is_subject_of = RZW
	}
	
	option = { 
		name = butua_flavour.15.a

		every_subject_country = {
			every_owned_province = {
				cede_province = ROOT
				add_core = ROOT
			}
		}
	}
}
