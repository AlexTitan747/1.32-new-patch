tm_hun_slot_1 = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		tag = HUN
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	
	emp_hun_black_army_supreme = {
		icon = gory_to_the_black_army
		required_missions = { hun_poland_alliance }
		position = 2
		provinces_to_highlight = {
			is_capital = yes
			owner = {
				is_neighbor_of = root
				land_morale = root
				NOT = { is_subject_of = root }
			}
			NOT = { owned_by = root }
		}
		trigger = {
			OR = {
				has_country_modifier = hun_black_army
				has_reform = black_army_reform
				custom_trigger_tooltip = {
					tooltip = emp_hun_black_army_supreme_trigger_tooltip
					OR = {
						current_age = age_of_absolutism
						current_age = age_of_revolutions
					}
				}
			}
			army_size_percentage = 1
			land_morale = 4
			all_neighbor_country = {
				OR = {
					NOT = { land_morale = root }
					is_subject_of = root
				}
			}
		}
		effect = {
			add_army_tradition = 20
			add_country_modifier = {
				name = hun_supreme_black_army
				duration = 7300
			}
		}
	}
	
	hun_vassal_states_three = {
		icon = mission_eastern_european_city
		required_missions = { hun_vassal_states_five }
		position = 3
		
		provinces_to_highlight = {
			OR = {
				area = serbia_area
				area = rascia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			ROOT = {
				NOT = {
					num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
						value = 8
						OR = {
							area = serbia_area
							area = rascia_area
						}
					}
				}
			}
		}
		
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 8
				OR = {
					area = serbia_area
					area = rascia_area
				}
			}
			is_subject = no
		}
		
		effect = {
			add_dip_power = 100
			serbia_area = {
				add_province_modifier = {
					name = "hun_moldavia_mod"
					duration = 10950
				}
			}
			rascia_area = {
				add_province_modifier = {
					name = "hun_moldavia_mod"
					duration = 10950
				}
			}
		}
		ai_weight = {
			factor = 500
		}
	}

	hun_vassal_states_four = {
		icon = mission_cannons_firing
		required_missions = { hun_vassal_states_three }
		position = 4
		
		provinces_to_highlight = {
			OR = {
				area = bosnia_area
				area = east_adriatic_coast_area
				province_id = 4754
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			bosnia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			east_adriatic_coast_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			owns_or_non_sovereign_subject_of = 4754
			is_subject = no
		}
		
		effect = {
			add_dip_power = 100
			bosnia_area = {
				add_province_modifier = {
					name = "hun_moldavia_mod"
					duration = 10950
				}
			}
			east_adriatic_coast_area = {
				add_province_modifier = {
					name = "hun_moldavia_mod"
					duration = 10950
				}
			}
			naples_area = {
				limit = {
					NOT = { is_claim = root }
					NOT = { is_core = root }
				}
				add_claim = root
			}
			apulia_area = {
				limit = {
					NOT = { is_claim = root }
					NOT = { is_core = root }
				}
				add_claim = root
			}
			calabria_area = {
				limit = {
					NOT = { is_claim = root }
					NOT = { is_core = root }
				}
				add_claim = root
				}
			}
		ai_weight = {
			factor = 500
		}
	}
	hun_ottoman_borders = {
		icon = mission_non-western_soldiers
		required_missions = { }
		position = 6
		
		trigger = {
			OR = {
				AND = {
					is_rival = TUR
				}
				AND = {
			if = {
				limit = {
					TUR = {
						any_owned_province = {
							region = balkan_region
						}
					}
				}
				calc_true_if = {
					desc = hun_ottoman_borders.tooltip
					amount = 3
					all_owned_province = {
						fort_level = 1
						any_neighbor_province = {
							owned_by = TUR
						}
					}
				}
				else = {
					any_owned_province = {
						fort_level = 3
							}
						}
					}
				}
			}
			is_subject = no
		}
		
		effect = {
			bulgaria_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			silistria_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
		ai_weight = {
			factor = 500	#AI HUngary should WANT to survive against the Ottoman threat
		}
	}
	
	hun_ottoman_borders_three = {
		icon = mission_crusade_for_varna
		required_missions = { hun_ottoman_borders }
		position = 7
		
		provinces_to_highlight = {
			OR = {
				area = bulgaria_area
				area = silistria_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			bulgaria_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			silistria_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			is_subject = no
		}
		
		effect = {
			add_adm_power = 100
			add_prestige = 10
			macedonia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			add_stat_or_monarch_power = {
				stat = mil
				amount = 1
			}
		}
		ai_weight = {
			factor = 75	#Tapping into Alt-History, but plausible
		}
	}

	hun_ottoman_borders_two = {
		icon = mission_conquer_5_states
		required_missions = { hun_ottoman_borders }
		position = 8
		
		provinces_to_highlight = {
			area = macedonia_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			macedonia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			is_subject = no
		}
		
		effect = {
			add_adm_power = 100
			add_prestige = 10
			thrace_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
		ai_weight = {
			factor = 50	#Less relevant
		}
	}
	
	hun_ottoman_borders_four = {
		icon = mission_ottoman_harem
		required_missions = { 
		hun_ottoman_borders_two 
		hun_ottoman_borders_three
		}
		position = 9
		
		provinces_to_highlight = {
			area = thrace_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			thrace_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			is_subject = no
		}
		
		effect = {
			add_adm_power = 100
			add_prestige = 30
			add_country_modifier = {
				name = "hun_constantinople"
				duration = 7300
			}
			northern_greece_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_claim = ROOT }
				}
				add_claim = ROOT
			}
			morea_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_claim = ROOT }
				}
				add_claim = ROOT
			}
			albania_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_claim = ROOT
			}
			if = {
				limit = {
					151 = { culture = turkish }
				}
				country_event = { id = new_flavour_hun.3 } #event used by Austria too
			}
		}
		ai_weight = {
			factor = 50	#Less relevant
		}
	}
}


tm_hun_slot_2 = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		tag = HUN
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes

	hun_poland_alliance = {
		icon = mission_noble_council
		required_missions = {  }
		position = 1

		provinces_to_highlight = {
			OR = {
				owned_by = POL
				AND = {
					NOT = { exists = POL }
					region = poland_region
					ROOT = {
						NOT = {
							num_of_owned_provinces_with = {
								value = 6
								region = poland_region
							}
						}
					}
				}
			}
		}
		
		trigger = {
			if = {
				limit = {
					exists = POL
					has_dlc = "Res Publica"
					POL = {
						OR = { 
							has_reform = polish_elective_monarchy
							has_reform = elective_monarchy
						}
					}
				}
				OR = { 
					POL = { dynasty = root }
					AND = {
						alliance_with = POL
						POL = {
							has_opinion = {
								who = ROOT
								value = 190
							}
						}
					}
					overlord_of = POL
					AND = { 
						OR = {
							is_rival = POL
							POL = { is_rival = ROOT }
						}
						army_size = POL
					}
				}
			}
			else_if = {
				limit = { exists = POL }
				OR = {
					alliance_with = POL
					overlord_of = POL
					POL = {
						has_opinion = {
							who = ROOT
							value = 190
						}
					}
					AND = { 
						OR = {
							is_rival = POL
							POL = { is_rival = ROOT }
						}
						army_size = POL
					}
				}
			}
			else_if = {
				limit = {
					NOT = { exists = POL }
				}
				OR = {
					army_size_percentage = 1
					num_of_owned_provinces_with = {
						value = 6
						region = poland_region
					}
				}
			}
			is_subject = no
		}
		
		effect = {
			southern_transylvania_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			transylvania_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			serbia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			rascia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			moldavia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
		ai_weight = {
			factor = 500	#Mission itself is rather ignorable, but the next one should be important for AI Hungary
		}
	}

	hun_vassal_states_five = {
		icon = mission_unite_home_region
		required_missions = { hun_poland_alliance }
		position = 2
		
		provinces_to_highlight = {
			OR = {
			area = transylvania_area
			area = southern_transylvania_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			transylvania_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			southern_transylvania_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			is_subject = no
		}
		
		effect = {
			wallachia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			croatia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			slavonia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			east_adriatic_coast_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			bosnia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}

			add_country_modifier = {
				name = expansion_plans
				duration = 7300
			}

			add_casus_belli = {
				type = cb_restore_personal_union
				months = 240
				target = CRO
			}

			add_prestige = 15
		}
		ai_weight = {
			factor = 500
		}
	}

	hun_vassal_states = {
		icon = mission_unite_home_region
		required_missions = { hun_vassal_states_five }
		position = 3
		
		provinces_to_highlight = {
			area = wallachia_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			wallachia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			is_subject = no
		}
		
		effect = {
			add_country_modifier = {
				name = hungarian_expanded_borders
				duration = 3650
			}
		}
		ai_weight = {
			factor = 500
		}
	}

	tm_hun_kingdom_consolidation = {
		icon = mission_eastern_european_city
		required_missions = { hun_vassal_states_four hun_vassal_states tm_hun_zagreb_cloth_trading }
		position = 5
		
		provinces_to_highlight = {
			owned_by = ROOT
		}
		
		trigger = {
			num_of_loans = 0
		}
		
		effect = {
			central_hungary_area = {
				add_prosperity = 100
			}
			add_treasury = 200
			add_adm_power = 75
			add_mil_power = 50
			add_country_modifier = {
				name = hungarian_kingdom
				duration = 3650
			}
			153 = { 
				add_base_tax = 1 
				add_base_production = 2
				add_base_manpower = 1

				add_great_project_tier = {
					type = buda_castle
					tier = 2
				}
			}
		}

		ai_weight = {
			factor = 500
		}
	}

}

tm_hun_slot_3 = {
	slot = 3
	generic = no
	ai = yes
	potential_on_load = {
		has_dlc = "Emperor"
	}
	potential = {
		has_dlc = "Emperor"
		tag = HUN
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes

	hun_vassal_states_two = {
		icon = mission_eastern_european_city
		required_missions = { hun_poland_alliance }
		position = 2
		
		provinces_to_highlight = {
			area = moldavia_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			moldavia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			is_subject = no
		}
		
		effect = {
			moldavia_area = {
				add_province_modifier = {
					name = "hun_moldavia_mod"
					duration = 10950
				}
			}

			add_country_modifier = {
				name = cavalry_experience
				duration = 3650
			}

			if = {
				limit = {
					has_dlc = "Emperor"
				}
				podolia_volhynia_area = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
				yedisan_area = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
				crimea_area = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
		}
		ai_weight = {
			factor = 500
		}
	}

	hun_croatian_union = {
		icon = mission_eastern_european_city
		required_missions = { hun_vassal_states_five }
		position = 3
		
		provinces_to_highlight = {
			owner = {
				tag = CRO
			}
		}
		
		trigger = {
			moldavia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			is_subject = no
		}
		
		effect = {
			croatia_area = {
				add_province_modifier = {
					name = "hun_moldavia_mod"
					duration = 10950
					}
				}

			if = {
				limit = {
					has_dlc = "Emperor"
				}
				podolia_volhynia_area = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
				yedisan_area = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
				crimea_area = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
		}
		ai_weight = {
			factor = 500
		}
	}

	tm_hun_zagreb_cloth_trading = {
		icon = mission_develop_cloth
		position = 4
		required_missions = { hun_croatian_union }

		provinces_to_highlight = {
			province_id = 4752
			province_id = 131
			province_id = 152
		}

		trigger = {
			4752 = {
				owned_by = ROOT
				base_production = 13
				has_building = workshop
			}
			131 = {
				owned_by = ROOT
				base_production = 12
				province_has_center_of_trade_of_level = 2
				has_building = workshop
			}
			152 = {
				owned_by = ROOT
				base_production = 13
				has_building = workshop
			}
		}

		effect = {
			4752 = {
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
			}
			131 = {
				add_center_of_trade_level = 1
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
			}
			152 = {
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
			}
		}
	}

	emp_hun_take_galicia = {
		icon = mission_partition_poland
		required_missions = {  }
		position = 6
		provinces_to_highlight = {
			OR = {
				area = malopolska_area
				area = red_ruthenia_area
				area = sandomierz_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			OR = {
				num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
					value = 9
					OR = {
						area = malopolska_area
						area = red_ruthenia_area
						area = sandomierz_area
					}
				}
				if = {
					limit = {
						exists = PLC
					}
					total_own_and_non_tributary_subject_development = PLC
					army_size = PLC
				}
				else_if = {
					limit = {
						exists = POL
					}
					total_own_and_non_tributary_subject_development = POL
					army_size = POL
				}
			}
			is_subject = no
		}
		effect = {
			if = {
				limit = {
					valid_for_personal_unions_trigger = yes
					exists = PLC
					PLC = {
						valid_for_personal_unions_trigger = yes
					}
				}
				add_casus_belli = {
					type = cb_restore_personal_union
					months = 300
					target = PLC
				}
			}
			else_if = {
				limit = {
					valid_for_personal_unions_trigger = yes
					exists = POL
					POL = {
						valid_for_personal_unions_trigger = yes
					}
				}
				add_casus_belli = {
					type = cb_restore_personal_union
					months = 300
					target = POL
				}
			}
				mazovia_area = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT }
					}
					add_permanent_claim = ROOT
				}
				central_poland_area = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT }
					}
					add_permanent_claim = ROOT
				}
				wielkopolska_area = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT }
					}
					add_permanent_claim = ROOT
				}
				kuyavia_area = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT }
					}
					add_permanent_claim = ROOT
				}
				add_stat_or_monarch_power = {
					stat = mil
					amount = 1
				}
		}
	}
	
	emp_hun_jagiellonian_union = {
		icon = jageillonian_union
		required_missions = { emp_hun_take_galicia }
		position = 7
		provinces_to_highlight = {
			OR = {
				area = mazovia_area
				area = central_poland_area
				area = wielkopolska_area
				area = kuyavia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			ROOT = {
				NOT = {
					num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
						value = 12 #out of 15
						OR = {
							area = mazovia_area
							area = central_poland_area
							area = wielkopolska_area
							area = kuyavia_area
						}
					}
				}
			}
		}
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 12 #out of 15
				OR = {
					area = mazovia_area
					area = central_poland_area
					area = wielkopolska_area
					area = kuyavia_area
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = hun_hungary_poland
				duration = -1
			}
			add_mil_power = 125
		}
	}
	emp_hun_weaken_austria = {
		icon = boh_humiliate_austria
		required_missions = { emp_hun_bohemian_crown }
		position = 8
		provinces_to_highlight = {
			country_or_non_sovereign_subject_holds = HAB
			HAB = {
				num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
					value = 13
				}
			}
		}
		trigger = {
			OR = {
				NOT = { exists = HAB }
				HAB = {
					custom_trigger_tooltip = {
						tooltip = emp_hun_weaken_austria_trigger_tooltip
						NOT = {
							num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
								value = 14
							}
						}
					}
					is_emperor = no
					NOT = { army_size = ROOT }
				}
			}
			is_subject = no
		}
		effect = {
			add_prestige = 25
			
			if = {
				limit = {
					exists = HAB
					valid_for_personal_unions_trigger = yes
					HAB = {
						valid_for_personal_unions_trigger = yes
					}
				}
				add_casus_belli = {
					type = cb_restore_personal_union
					months = 300
					target = HAB
				}
			}
			else = {
				austria_proper_area = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
				inner_austria_area = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
		}
	}
	emp_hun_bulwark_of_christianity = {
		icon = shield_of_christendom
		required_missions = { hun_ottoman_borders_four }
		position = 9
		provinces_to_highlight = {
			owner = {
				religion_group = muslim
				OR = {
					culture_group = turko_semitic
					is_neighbor_of = root
					capital_scope = {
						continent = europe
					}
				}
				army_size = root
			}
			ROOT = {
				religion_group = christian
			}
		}
		trigger = {
			if = {
				limit = {
					religion_group = christian
				}
				custom_trigger_tooltip = {
					tooltip = emp_hun_bulwark_of_christianity_trigger_tooltip
					NOT = {
						any_country = {
							religion_group = muslim
							OR = {
								culture_group = turko_semitic
								is_neighbor_of = root
								capital_scope = {
									continent = europe
								}
							}
							army_size = root
						}
					}
				}
			}
			else = { #congrats, you've broken it.
				religion_group = root
			}
			is_subject = no
		}
		effect = {
			add_country_modifier = {
				name = hun_bulwark_of_christianity
				duration = 7300
			}
		}
	}
	emp_hun_duchy_of_austria = {
		icon = mission_the_austrian_succession
		required_missions = { emp_hun_bulwark_of_christianity }
		provinces_to_highlight = {
			OR = {
				AND = {
					OR = {
						area = austria_proper_area
						area = inner_austria_area
						area = carinthia_area
					}
					NOT = { country_or_non_sovereign_subject_holds = ROOT }
					NOT = {
						ROOT = {
							num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
								value = 9
								OR = {
									area = austria_proper_area
									area = inner_austria_area
									area = carinthia_area
								}
							}
						}
					}
				}
				AND = {
					province_id = 134
					NOT = { country_or_non_sovereign_subject_holds = ROOT }
				}
			}
		}
		trigger = {
			owns_or_non_sovereign_subject_of = 134 #Vienna
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 9
				OR = {
					area = austria_proper_area
					area = inner_austria_area
					area = carinthia_area
				}
			}
		}
		effect = {
			if = {
				limit = {
					NOT = { government_rank = 3 }
				}
				set_government_rank = 3
			}
			else = { add_prestige = 50 }

			add_country_modifier = {
				name = hun_hungarian_austria
				duration = -1
			}
		}
	}
}

tm_hun_slot_4 = {
	slot = 4
	generic = no
	ai = yes
	potential_on_load = {
		has_dlc = "Emperor"
	}
	potential = {
		has_dlc = "Emperor"
		tag = HUN
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	
	
	emp_hun_fund_monasteries = {
		icon = fund_the_monasteries
		required_missions = {  }
		provinces_to_highlight = {
			owned_by = ROOT
			has_tax_building_trigger = no
			ROOT = {
				NOT = {
					num_of_owned_provinces_with = {
						value = 5
						has_tax_building_trigger = yes
					}
				}
			}
		}
		trigger = {
			num_of_owned_provinces_with = {
				value = 5
				has_tax_building_trigger = yes
			}
		}
		effect = {
			add_prestige = 20
			add_country_modifier = {
				name = hun_funded_paulines
				duration = 7300
			}
		}
	}
	
	emp_hun_religious_unity = {
		icon = spread_piety
		required_missions = { emp_hun_fund_monasteries }
		provinces_to_highlight = {
			owned_by = ROOT
			NOT = { religion = ROOT }
		}
		trigger = {
			religious_unity = 1
		}
		effect = {
			add_stability_or_adm_power = yes
			add_stat_or_monarch_power = {
				stat = adm
				amount = 1
			}
		}
	}
	
	emp_hun_nagyszombat_university = {
		icon = nagyszombat_university
		required_missions = { emp_hun_corviana_library emp_hun_religious_unity }
		provinces_to_highlight = {
			province_id = 1772
			NOT = {
				AND = {
					owned_by = root
					is_state_core = root
					development = 25
					has_building = university
				}
			}
		}
		trigger = {
			owns_core_province = 1772
			1772 = {
				development = 25
				has_building = university
			}
		}
		effect = {
			if = {
				limit = {
					religion = catholic
				}
				add_country_modifier = {
					name = hun_nagysz_uni_catholic
					duration = 7300
				}
			}
			else = {
				add_country_modifier = {
					name = hun_nagysz_uni_non_catholic
					duration = 7300
				}
			}
		}
	}
	emp_hun_hungarian_succession = {
		icon = the_hungarian_succession
		required_missions = {  }
		position = 6
		trigger = {
			custom_trigger_tooltip = {
				OR = {
					has_country_flag = hun_has_had_matthias_corvinus_event
					is_year = 1457
				}
				tooltip = emp_hun_hungarian_succession_tooltip
			}
			is_subject = no
			has_regency = no
			if = {
				limit = {
					government = monarchy
					has_government_attribute = heir
				}
				has_heir = yes
			}
		}
		effect = {
			add_prestige = 20
			moravia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			silesia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			lusatia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	
	emp_hun_bohemian_borderlands = {
		icon = bohemian_borderlands
		required_missions = { emp_hun_hungarian_succession }
		ai_weight = {
			factor = 5
		}

		provinces_to_highlight = {
			OR = {
				area = moravia_area
				area = silesia_area
				area = lusatia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			ROOT = {
				NOT = {
					num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
						value = 5
						OR = {
							area = moravia_area
							area = silesia_area
							area = lusatia_area
						}
					}
				}
			}
		}
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 5
				OR = {
					area = moravia_area
					area = silesia_area
					area = lusatia_area
				}
			}
			is_subject = no
		}
		effect = {
			add_adm_power = 50
			
			if = {
				limit = {
					exists = BOH
					valid_for_personal_unions_trigger = yes
					BOH = {
						valid_for_personal_unions_trigger = yes
					}
				}
				add_casus_belli = {
					type = cb_restore_personal_union
					months = 300
					target = BOH
				}
			}
				bohemia_area = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
				erzgebirge_area = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
		}
	
	emp_hun_bohemian_crown = {
		icon = bohemian_commonwealth
		required_missions = { emp_hun_bohemian_borderlands }
		ai_weight = {
			factor = 5
		}

		provinces_to_highlight = {
			OR = {
				area = bohemia_area
				area = erzgebirge_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = { #8 provinces so fine for demanding all
			bohemia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			erzgebirge_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			is_subject = no
			NOT = { active_imperial_incident = any }
		}
		effect = {
			add_prestige = 25

			if = {
				limit = {
					is_elector = no
					BOH = { is_elector = yes }
					OR = {
						hre_religion_locked = no
						hre_religion = root
					}
				}
				if = {
					limit = {
						NOT = { senior_union_with = BOH }
					}
					custom_tooltip = emp_hun_bohemian_crown_effect_tooltip
				}
				tooltip = {
					country_event = { id = new_flavour_hun.1 }
				}
				hidden_effect = {
					if = {
						limit = {
							senior_union_with = BOH
						}
						country_event = { id = new_flavour_hun.1 }
					}
				}
			}
		}
	}
}


tm_hun_slot_5 = {
	slot = 5
	generic = no
	ai = yes
	potential_on_load = {
		has_dlc = "Emperor"
	}
	potential = {
		has_dlc = "Emperor"
		tag = HUN
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	
	tm_hun_hont_gold_mine = {
		icon = mission_war_chest
		required_missions = {  }
		position = 1
		provinces_to_highlight = {
			OR = {
				province_id = 154
			}
		}
		trigger = {
			154 = {
				owned_by = ROOT
				is_core = ROOT
				base_production = 10
			}
		}
		effect = {
			154 = {
				add_local_autonomy = -100
				add_base_production = 2
				add_province_modifier = {
					name = hont_gold_mines
					duration = 7300
				}
			}
			add_country_modifier = {
				name = hun_strong_economy
				duration = 7300
			}
		}
		ai_weight = {
			factor = 500	#Also gold is important too
		}
	}

	emp_hun_corviana_library = {
		icon = bibliotheca_corviana
		position = 2
		required_missions = { tm_hun_hont_gold_mine emp_hun_fund_monasteries }
		provinces_to_highlight = {
			province_id = 153
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		trigger = {
			has_institution = renaissance
			prestige = 50
			owns_core_province = 153
		}
		effect = {
			add_country_modifier = {
				name = hun_corviana_library
				duration = 7300
			}
			153 = {
				if = {
					limit = {
						has_dlc = "Leviathan"
						has_great_project = {
							type = buda_castle
							tier = 0
						}
					}
					set_great_project_tier_1 = {
						type = buda_castle
					}
				}
				else = {
					add_base_tax = 3
				}
			}
		}
	}

	emp_hun_great_city_of_pest = {
		icon = the_great_city_of_buda
		required_missions = { emp_hun_corviana_library }
		position = 3
		provinces_to_highlight = {
			OR = {
				AND = {
					province_id = 134
					ROOT = {
						capital_scope = {
							NOT = {
								higher_development_than = 134
							}
						}
					}
				}
				AND = {
					province_id = 266
					ROOT = {
						capital_scope = {
							NOT = {
								higher_development_than = 266
							}
						}
					}
				}
			}
		}
		trigger = {
			capital_scope = {
				higher_development_than = 134
				higher_development_than = 266
			}
		}
		effect = {
			capital_scope = {
				add_province_modifier = {
					name = hun_great_city
					duration = 7300
				}
			}
		}
	}
	
	emp_hun_strong_government = {
		icon = a_strong_government
		required_missions = { emp_hun_great_city_of_pest }
		position = 4
		trigger = {
			reform_level = 7
			crown_land_share = 80
		}
		effect = {
			add_country_modifier = {
				name = hun_golden_age_of_hungary
				duration = 9125
			}
		}
	}
}