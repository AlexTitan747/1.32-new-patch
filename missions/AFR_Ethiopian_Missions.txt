ethiopia_slot_1 = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = ETH
			tag = AKS
			tag = BTI
		}
	}
	has_country_shield = yes

	tm_eth_handle_the_subjects = {
		icon = mission_have_two_subjects
		required_missions = { }
		position = 3

		provinces_to_highlight = {
			country_or_non_sovereign_subject_holds = ROOT
			NOT = { owned_by = ROOT }
		}

		trigger = {
			NOT = {
				any_subject_country = {
					liberty_desire = 30
				}
			}
			custom_trigger_tooltip = {
				tooltip = tm_eth_no_subject_has_too_much_dev_tt
				NOT = {
					any_subject_country = {
						development_of_overlord_fraction = 0.33
					}
				}
			}
			OR = {
				total_development = 225
				total_own_and_non_tributary_subject_development = 200
			}
		}
		
		effect = {
			if = {
				limit = {
					num_of_subjects = 1
				}
				country_event = {
					id = flavor_eth.35
					tooltip = tm_eth_deal_with_subjects_tt
				}
			}
			else = {
				add_stability_or_adm_power = yes
			}
		}
	}

	tm_eth_the_gold_mines = {
		icon = mission_war_chest
		required_missions = { tm_eth_handle_the_subjects }
		position = 4

		provinces_to_highlight = {
			OR = {
				province_id = 2762
				province_id = 2757
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
				NOT = { base_production = 6 }
				NOT = { is_state = yes }
			}
		}

		trigger = {
			2762 = {
				owned_by = ROOT
				is_core = ROOT
				base_production = 6
				is_state = yes
			}
			2757 = {
				owned_by = ROOT
				is_core = ROOT
				base_production = 6
				is_state = yes
			}
		}
		
		effect = {
			2762 = {
				add_local_autonomy = -100
				add_province_modifier = {
					name = eth_increased_gold_mining
					duration = 9125
				}
				add_base_production = 1
			}
			2757 = {
				add_local_autonomy = -100
				add_province_modifier = {
					name = eth_increased_gold_mining
					duration = 9125
				}
				add_base_production = 1
			}
		}
	}
}

ethiopia_slot_1_trade = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = ETH
			tag = AKS
			tag = BTI
		}
	}
	has_country_shield = yes

	tm_eth_trade_1 = {
		icon = mission_african_trade_post
		required_missions = { }
		position = 6

		provinces_to_highlight = {
			owned_by = ROOT
			province_has_center_of_trade_of_level = 1
			OR = {
				NOT = { province_has_center_of_trade_of_level = 3 }
				NOT = { has_trade_building_trigger = yes }
			}
		}

		trigger = {
			OR = {
				trade_efficiency = 0.20
				trade_income_percentage = 0.15
			}
			num_of_owned_provinces_with = {
				value = 8
				OR = {
					has_trade_building_trigger = yes
					province_has_center_of_trade_of_level = 2
				}
			}
		}

		effect = {
			define_advisor = {
				type = trader
				skill = 3
				culture = ROOT
				religion = ROOT
				cost_multiplier = 0.25
			}
			2772 = {
				add_trade_modifier = {
					who = ROOT
					duration = -1
					power = 20
					key = STRONG_MERCHANTS
				}
			}
			4346 = {
				add_trade_modifier = {
					who = ROOT
					duration = -1
					power = 15
					key = STRONG_MERCHANTS
				}
			}
		}
	}

	tm_eth_trade_2 = {
		icon = mission_dominate_home_trade_node
		required_missions = { tm_eth_trade_1 tm_eth_african_manufactories }
		position = 8

		provinces_to_highlight = {
			province_id = 2772
		}

		trigger = {
			2772 = {
				trade_node_value = 75
				trade_share = {
					country = ROOT
					share = 80
				}
				has_merchant = ROOT
			}
			monthly_income = 200
		}

		effect = {
			2772 = { add_trade_node_income = 24 }
			add_mercantilism = 5
			add_country_modifier = {
				name = tm_eth_controling_ethiopian_trade
				duration = -1
			}
		}
	}
}

ethiopia_slot_mali_dip_1 = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = ETH
			tag = AKS
			tag = BTI
		}
	}
	has_country_shield = yes

	tm_eth_open_diplomacy_with_mali = {
		icon = mission_friends_or_enemies
		required_missions = { }
		position = 9

		provinces_to_highlight = {
			is_capital_of = event_target:mali_event_target
		}

		trigger = {
			mission_completed = tm_eth_unified_horn
			if = {
				limit = {
					NOT = {
						calc_true_if = {
							amount = 2

							has_country_flag = tm_eth_friendly_mal
							has_country_flag = tm_eth_friendly_to_mams
							has_country_flag = tm_eth_friendly_rzw
						}
					}
				}
				OR = {
					event_target:mali_event_target = {
						alliance_with = ROOT
						has_opinion = {
							who = ROOT
							value = 100
						}
					}
					event_target:mali_event_target = {
						has_been_insulted_by_root = yes
					}
				}
			}
			else = {
				event_target:mali_event_target = {
					has_been_insulted_by_root = yes
				}
			}
		}
		
		effect = {
			custom_tooltip = tm_eth_at_most_2_ally_paths_tt
			custom_tooltip = tm_mal_eth_dip_hostile_choice_reward_first_mission
			if = {
				limit = {
					event_target:mali_event_target = { has_been_insulted_by_root = yes }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				if = {
					limit = { NOT = { has_global_flag = tm_funj_exists } }
					custom_tooltip = tm_force_funj
				}
				define_advisor = {
					type = army_reformer
					skill = 2
					discount = yes
				}
				custom_tooltip = tm_eth_unlock_hostile_mal
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = tm_mal_eth_dip_friendly_choice_reward_first_mission
			if = {
				limit = {
					event_target:mali_event_target = { alliance_with = ROOT }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				add_historical_friend = event_target:mali_event_target
				define_advisor = {
					type = diplomat
					skill = 3
					cost_multiplier = 0.33
					religion = event_target:mali_event_target
					culture = event_target:mali_event_target
				}
				custom_tooltip = tm_ally_has_effects_too

				custom_tooltip = tm_eth_unlock_friendly_mal
			}
			hidden_effect = {
				if = {
					limit = { event_target:mali_event_target = { has_been_insulted_by_root = yes } }
					if = {
						limit = { NOT = { has_global_flag = tm_funj_exists } }
						1220 = { province_event = { id = flavor_nub.1 } }
					}
					add_casus_belli = {
						type = cb_annex
						target = NUB
						months = 600
					}
					define_advisor = {
						type = army_reformer
						skill = 2
						discount = yes
						culture = ROOT
						religion = ROOT
					}
					set_country_flag = tm_eth_hostile_mal
					swap_non_generic_missions = yes
				}
				else = {
					add_historical_friend = event_target:mali_event_target
					define_advisor = {
						type = diplomat
						skill = 3
						cost_multiplier = 0.33
						religion = event_target:mali_event_target
						culture = event_target:mali_event_target
					}
					event_target:mali_event_target = {
						add_historical_friend = ROOT
						define_advisor = {
							type = diplomat
							skill = 3
							cost_multiplier = 0.33
							religion = ROOT
							culture = ROOT
						}
					}
					set_country_flag = tm_eth_friendly_mal
					swap_non_generic_missions = yes
				}
			}
		}
	}
}

ethiopia_slot_mali_dip_1_placeholders = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = ETH
			tag = AKS
			tag = BTI
		}
		NOT = { has_country_flag = tm_eth_hostile_mal }
		NOT = { has_country_flag = tm_eth_friendly_mal }
	}
	has_country_shield = yes

	tm_eth_diplomacy_with_mali_placeholder_1 = {
		icon = mission_locked_mission
		required_missions = { tm_eth_open_diplomacy_with_mali }
		position = 10

		provinces_to_highlight = {}

		trigger = {
			custom_trigger_tooltip = {
				tooltip = tm_eth_mali_dip_branching
				always = no 
			}
		}
		
		effect = {
			custom_tooltip = tm_mal_eth_dip_hostile_choice_reward
			tooltip = {
				nyala_area = { add_perma_claim = yes }
				kanem_area = { add_perma_claim = yes }
				bornu_area = { add_perma_claim = yes }
			}
			custom_tooltip = tm_mal_eth_dip_friendly_choice_reward
			tooltip = {
				capital_scope = {
					if = {
						limit = { ROOT = { NOT = { any_owned_province = { has_building = cultural_ministry } } } }
						add_building_construction = {
							building = cultural_ministry
							speed = 0.25
							cost = 0.5
						}
					}
					else = {
						add_base_production = 5
					}
					add_province_modifier = {
						name = tm_mal_ethiopia_diplomatic_ties_province
						duration = -1
					}
				}
			}
			custom_tooltip = tm_eth_mal_dip_friendly_if_they_have_1
			if = {
				limit = {
					event_target:mali_event_target = { mission_completed = mal_approach_to_ethiopia_friendly_1 }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_any_time_we_are_allied_tt
				add_country_modifier = {
					name = tm_mal_ethiopia_diplomatic_ties
					duration = -1
				}
				custom_tooltip = tm_ally_has_effects_too
			}
		}
	}
	tm_eth_diplomacy_with_mali_placeholder_2 = {
		icon = mission_locked_mission
		required_missions = { tm_eth_diplomacy_with_mali_placeholder_1 }
		position = 11

		provinces_to_highlight = {}

		trigger = {
			custom_trigger_tooltip = {
				tooltip = tm_eth_mali_dip_branching
				always = no 
			}
		}
		
		effect = {
			custom_tooltip = tm_mal_eth_dip_hostile_choice_reward
			tooltip = {
				east_azbin_area = { add_perma_claim = yes }
				azbin_area = { add_perma_claim = yes }
				katsina_area = { add_perma_claim = yes }
				hausa_area = { add_perma_claim = yes }
				adamawa_plateau_area = { add_perma_claim = yes }
				zazzau_area = { add_perma_claim = yes }
				lower_niger_area = { add_perma_claim = yes }
				add_adm_power = 50
				add_mil_power = 75
			}
			custom_tooltip = tm_mal_eth_dip_friendly_choice_reward
			custom_tooltip = tm_mal_eth_dip_friendly_if_we_are
			if = {
				limit = {
					NOT = { event_target:mali_event_target = { mission_completed = mal_approach_to_ethiopia_friendly_2 } }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_any_time_we_are_allied_tt
				custom_tooltip = tm_mal_eth_shared_farming_techniques
				add_province_modifier = {
					name = tm_mal_eth_shared_farming_1
					duration = -1
				}
				custom_tooltip = tm_ally_has_effects_too
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = tm_eth_mal_dip_friendly_if_they_have
			if = {
				limit = {
					event_target:mali_event_target = { mission_completed = mal_approach_to_ethiopia_friendly_2 }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_any_time_we_are_allied_tt
				custom_tooltip = tm_the_previous_modifier_is_doubled
				custom_tooltip = tm_ally_has_effects_too
			}
		}
	}
	tm_eth_diplomacy_with_mali_placeholder_3 = {
		icon = mission_locked_mission
		required_missions = { tm_eth_diplomacy_with_mali_placeholder_2 }
		position = 12

		provinces_to_highlight = {}

		trigger = {
			custom_trigger_tooltip = {
				tooltip = tm_eth_mali_dip_branching
				always = no 
			}
		}
		
		effect = {
			custom_tooltip = tm_mal_eth_dip_hostile_choice_reward
			tooltip = {
				custom_tooltip = tm_mal_claims_in_sahel
				sahel_region = { add_perma_claim = yes }
				niger_region = { add_perma_claim = yes }
				add_prestige_or_monarch_power = { amount = 40 }
				add_adm_power = 150
			}
			custom_tooltip = tm_mal_eth_dip_friendly_choice_reward
			custom_tooltip = tm_mal_eth_dip_friendly_if_we_are
			if = {
				limit = {
					NOT = { event_target:mali_event_target = { mission_completed = mal_approach_to_ethiopia_friendly_3 } }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_mal_eth_metals_reward_1
				custom_tooltip = tm_ally_has_effects_too
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = tm_eth_mal_dip_friendly_if_they_have
			if = {
				limit = {
					event_target:mali_event_target = { mission_completed = mal_approach_to_ethiopia_friendly_3 }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				add_country_modifier = {
					name = tm_mal_metal_production
					duration = 5475
				}
				custom_tooltip = tm_ally_has_effects_too
			}
		}
	}
	tm_eth_diplomacy_with_mali_placeholder_4 = {
		icon = mission_locked_mission
		required_missions = { tm_eth_diplomacy_with_mali_placeholder_3 }
		position = 13

		provinces_to_highlight = {}

		trigger = {
			custom_trigger_tooltip = {
				tooltip = tm_eth_mali_dip_branching
				always = no 
			}
		}
		
		effect = {
			custom_tooltip = tm_mal_eth_dip_hostile_choice_reward
			tooltip = {
				add_country_modifier = {
					name = tm_eth_conquerer_of_west_africa
					duration = -1
				}
				add_power_projection = {
					type = 10_permanent_power_projection
					amount = 10
				}
			}
			custom_tooltip = sca_scandinavian_european_empire_tt
			custom_tooltip = tm_mal_eth_dip_friendly_choice_reward
			custom_tooltip = tm_mal_eth_dip_friendly_if_we_are
			if = {
				limit = {
					NOT = { event_target:mali_event_target = { mission_completed = mal_approach_to_ethiopia_friendly_4 } }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_any_time_we_are_allied_tt
				add_country_modifier = {
					name = tm_mal_eth_joint_military_alliance
					duration = -1
				}
				custom_tooltip = tm_ally_has_effects_too
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = tm_eth_mal_dip_friendly_if_they_have
			if = {
				limit = {
					event_target:mali_event_target = { mission_completed = mal_approach_to_ethiopia_friendly_4 }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_mal_eth_combined_military_might_tt
			}
		}
	}
}

ethiopia_slot_mali_dip_1_hostile = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = ETH
			tag = AKS
			tag = BTI
		}
		has_country_flag = tm_eth_hostile_mal
	}
	has_country_shield = yes

	tm_eth_diplomacy_with_mali_hostile_1 = {
		icon = mission_abu_saids_dream
		required_missions = { tm_eth_open_diplomacy_with_mali }
		position = 10

		provinces_to_highlight = {
			OR = {
				area = kurdufan_area
				area = medwa_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 5
				OR = {
					area = kurdufan_area
					area = medwa_area
				}
			}
		}
		
		effect = {
			nyala_area = { add_perma_claim = yes }
			kanem_area = { add_perma_claim = yes }
			bornu_area = { add_perma_claim = yes }
		}
	}
	tm_eth_diplomacy_with_mali_hostile_2 = {
		icon = mission_saharan_route
		required_missions = { tm_eth_diplomacy_with_mali_hostile_1 }
		position = 11

		provinces_to_highlight = {
			region = sahel_region
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 20
				region = sahel_region
			}
		}
		
		effect = {
			east_azbin_area = { add_perma_claim = yes }
			azbin_area = { add_perma_claim = yes }
			katsina_area = { add_perma_claim = yes }
			hausa_area = { add_perma_claim = yes }
			adamawa_plateau_area = { add_perma_claim = yes }
			zazzau_area = { add_perma_claim = yes }
			lower_niger_area = { add_perma_claim = yes }
			add_adm_power = 50
			add_mil_power = 75
		}
	}
	tm_eth_diplomacy_with_mali_hostile_3 = {
		icon = mission_subdue_rajputana
		required_missions = { tm_eth_diplomacy_with_mali_hostile_2 }
		position = 12

		provinces_to_highlight = {
			OR = {
				area = east_azbin_area
				area = azbin_area
				area = katsina_area
				area = hausa_area
				area = adamawa_plateau_area
				area = zazzau_area
				area = lower_niger_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 40
				OR = {
					region = sahel_region
					region = niger_region
				}
			}
		}
		
		effect = {
			custom_tooltip = tm_mal_claims_in_sahel
			sahel_region = { add_perma_claim = yes }
			niger_region = { add_perma_claim = yes }
			add_prestige_or_monarch_power = { amount = 40 }
			add_adm_power = 150
		}
	}
	tm_eth_diplomacy_with_mali_hostile_4 = {
		icon = mission_mal_west_african_great_power
		required_missions = { tm_eth_diplomacy_with_mali_hostile_3 }
		position = 13

		provinces_to_highlight = {
			OR = {
				region = sahel_region
				region = niger_region
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 80
				OR = {
					region = sahel_region
					region = niger_region
				}
			}
		}
		
		effect = {
			add_country_modifier = {
				name = tm_eth_conquerer_of_west_africa
				duration = -1
			}
			add_power_projection = {
				type = 10_permanent_power_projection
				amount = 10
			}
			custom_tooltip = sca_scandinavian_european_empire_tt
		}
	}
}

ethiopia_slot_mali_dip_1_friendly = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = ETH
			tag = AKS
			tag = BTI
		}
		has_country_flag = tm_eth_friendly_mal
	}
	has_country_shield = yes

	tm_eth_diplomacy_with_mali_friendly_1 = {
		icon = mission_son_fetishist_alliances
		required_missions = { tm_eth_open_diplomacy_with_mali }
		position = 10

		provinces_to_highlight = {
			is_capital_of = event_target:ethiopia_event_target
		}

		trigger = {
			event_target:mali_event_target = {
				trust = { who = ROOT value = 75 }
				has_opinion = {
					who = ROOT
					value = 125
				}
				alliance_with = ROOT
			}
			treasury = 1000
		}
		
		effect = {
			capital_scope = {
				if = {
					limit = { ROOT = { NOT = { any_owned_province = { has_building = cultural_ministry } } } }
					add_building_construction = {
						building = cultural_ministry
						speed = 0.25
						cost = 0.5
					}
				}
				else = {
					add_base_production = 5
				}
				add_province_modifier = {
					name = tm_mal_ethiopia_diplomatic_ties_province
					duration = -1
				}
			}
			
			custom_tooltip = tm_eth_mal_dip_friendly_if_they_have_1
			if = {
				limit = {
					event_target:mali_event_target = { mission_completed = mal_approach_to_ethiopia_friendly_1 }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_any_time_we_are_allied_tt
				add_country_modifier = {
					name = tm_mal_ethiopia_diplomatic_ties
					duration = -1
				}
				custom_tooltip = tm_ally_has_effects_too
			}
			hidden_effect = {
				if = {
					limit = { event_target:mali_event_target = { mission_completed = mal_approach_to_ethiopia_friendly_1 } }
					set_country_flag = tm_mal_eth_dip_ties_flag
					add_country_modifier = {
						name = tm_mal_ethiopia_diplomatic_ties
						duration = -1
					}
					event_target:ethiopia_event_target = {
						set_country_flag = tm_mal_eth_dip_ties_flag
						add_country_modifier = {
							name = tm_mal_ethiopia_diplomatic_ties
							duration = -1
						}
					}
				}
			}
		}
	}
	tm_eth_diplomacy_with_mali_friendly_2 = {
		icon = mission_secure_khandesh
		required_missions = { tm_eth_diplomacy_with_mali_friendly_1 }
		position = 11

		provinces_to_highlight = {
			owned_by = ROOT
			OR = {
				trade_goods = grain
				trade_goods = ale
				trade_goods = livestock
				trade_goods = cheese
			}
			OR = {
				NOT = { development = 15 }
				NOT = { has_production_building_trigger = yes }
			}
		}

		trigger = {
			event_target:mali_event_target = {
				alliance_with = ROOT
				has_opinion = {
					who = ROOT
					value = 125
				}
			}
			num_of_owned_provinces_with = {
				value = 10
				OR = {
					trade_goods = grain
					trade_goods = ale
					trade_goods = livestock
					trade_goods = cheese
				}
				development = 15
				has_production_building_trigger = yes
			}
		}
		
		effect = {
			custom_tooltip = tm_mal_eth_dip_friendly_if_we_are
			if = {
				limit = {
					NOT = { event_target:mali_event_target = { mission_completed = mal_approach_to_ethiopia_friendly_2 } }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_any_time_we_are_allied_tt
				custom_tooltip = tm_mal_eth_shared_farming_techniques
				add_province_modifier = {
					name = tm_mal_eth_shared_farming_1
					duration = -1
				}
				custom_tooltip = tm_ally_has_effects_too
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = tm_eth_mal_dip_friendly_if_they_have
			if = {
				limit = {
					event_target:mali_event_target = { mission_completed = mal_approach_to_ethiopia_friendly_2 }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_any_time_we_are_allied_tt
				custom_tooltip = tm_the_previous_modifier_is_doubled
				custom_tooltip = tm_ally_has_effects_too
			}
			hidden_effect = {
				if = {
					limit = { NOT = { event_target:mali_event_target = { mission_completed = mal_approach_to_ethiopia_friendly_2 } } }
					set_country_flag = tm_mal_eth_shared_farming_country_flag_1
					for = {
						amount = 5
						effect = "
							random_owned_province = {
								limit = {
									OR = { region = sahel_region region = niger_region }
									NOT = { has_province_modifier = tm_mal_eth_shared_farming_1 }
									OR = { trade_goods = grain trade_goods = ale }
								}
								set_province_flag = tm_mal_eth_shared_farming_1_flag
								add_province_modifier = {
									name = tm_mal_eth_shared_farming_1
									duration = -1
								}
							}
						"
					}
					for = {
						amount = 5
						effect = "
							random_owned_province = {
								limit = {
									OR = { region = sahel_region region = niger_region }
									NOT = { has_province_modifier = tm_mal_eth_shared_farming_1 }
									OR = { trade_goods = livestock trade_goods = cheese }
								}
								set_province_flag = tm_mal_eth_shared_farming_1_flag
								add_province_modifier = {
									name = tm_mal_eth_shared_farming_1
									duration = -1
								}
							}
						"
					}
					event_target:mali_event_target = {
						set_country_flag = tm_mal_eth_shared_farming_country_flag_1
						for = {
							amount = 5
							effect = "
								random_owned_province = {
									limit = {
										region = horn_of_africa_region
										NOT = { has_province_modifier = tm_mal_eth_shared_farming_1 }
										OR = {
											trade_goods = grain
											trade_goods = ale
										}
									}
									set_province_flag = tm_mal_eth_shared_farming_1_flag
									add_province_modifier = {
										name = tm_mal_eth_shared_farming_1
										duration = -1
									}
								}
							"
						}
						for = {
							amount = 5
							effect = "
								random_owned_province = {
									limit = {
										region = horn_of_africa_region
										NOT = { has_province_modifier = tm_mal_eth_shared_farming_1 }
										OR = {
											trade_goods = livestock
											trade_goods = cheese
										}
									}
									set_province_flag = tm_mal_eth_shared_farming_1_flag
									add_province_modifier = {
										name = tm_mal_eth_shared_farming_1
										duration = -1
									}
								}
							"
						}
					}
				}
				if = {
					limit = { event_target:mali_event_target = { mission_completed = mal_approach_to_ethiopia_friendly_2 } }
					every_province = {
						limit = { has_province_flag = tm_mal_eth_shared_farming_1_flag }
						clr_province_flag = tm_mal_eth_shared_farming_1_flag
						set_province_flag = tm_mal_eth_shared_farming_2_flag
					}
					every_province = {
						limit = { has_province_modifier = tm_mal_eth_shared_farming_1 }
						remove_province_modifier = tm_mal_eth_shared_farming_1
						add_province_modifier = {
							name = tm_mal_eth_shared_farming_2
							duration = -1
						}
					}
					clr_country_flag = tm_mal_eth_shared_farming_country_flag_1
					set_country_flag = tm_mal_eth_shared_farming_country_flag_2
					event_target:mali_event_target = {
						clr_country_flag = tm_mal_eth_shared_farming_country_flag_1
						set_country_flag = tm_mal_eth_shared_farming_country_flag_2
					}
				}
			}
		}
	}
	tm_eth_diplomacy_with_mali_friendly_3 = {
		icon = mission_nah_dinetah
		required_missions = { tm_eth_diplomacy_with_mali_friendly_2 }
		position = 12

		provinces_to_highlight = {
			prov_has_metal_good = yes
			owned_by = ROOT
		}

		trigger = {
			event_target:mali_event_target = {
				alliance_with = ROOT
				has_opinion = {
					who = ROOT
					value = 125
				}
			}
			num_of_owned_provinces_with = {
				value = 5
				prov_has_metal_good = yes
				num_of_times_expanded_infrastructure = 1
				development = 20
			}
		}
		
		effect = {
			custom_tooltip = tm_mal_eth_dip_friendly_if_we_are
			if = {
				limit = {
					NOT = { event_target:mali_event_target = { mission_completed = mal_approach_to_ethiopia_friendly_3 } }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_mal_eth_metals_reward_1
				custom_tooltip = tm_ally_has_effects_too
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = tm_eth_mal_dip_friendly_if_they_have
			if = {
				limit = {
					event_target:mali_event_target = { mission_completed = mal_approach_to_ethiopia_friendly_3 }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				add_country_modifier = {
					name = tm_mal_metal_production
					duration = 5475
				}
				custom_tooltip = tm_ally_has_effects_too
			}
			hidden_effect = {
				if = {
					limit = { NOT = { event_target:mali_event_target = { mission_completed = mal_approach_to_ethiopia_friendly_3 } } }
					for = {
						amount = 5
						effect = "
							random_owned_province = {
								limit = {
									prov_has_metal_good = yes
								}
								add_base_production = 3
								if = { limit = { NOT = { has_building = warehouse } } add_building = warehouse }
								else = { add_base_production = 2 }
							}
						"
					}
					event_target:mali_event_target = {
						for = {
							amount = 5
							effect = "
								random_owned_province = {
									limit = {
										prov_has_metal_good = yes
									}
									add_base_production = 3
									if = { limit = { NOT = { has_building = warehouse } } add_building = warehouse }
									else = { add_base_production = 2 }
								}
							"
						}
					}
				}
				if = {
					limit = { event_target:mali_event_target = { mission_completed = mal_approach_to_ethiopia_friendly_3 } }
					add_country_modifier = {
						name = tm_mal_metal_production
						duration = 5475
					}
					event_target:mali_event_target = {
						add_country_modifier = {
							name = tm_mal_metal_production
							duration = 5475
						}
					}
				}
			}
		}
	}
	tm_eth_diplomacy_with_mali_friendly_4 = {
		icon = fra_grande_armee
		required_missions = { tm_eth_diplomacy_with_mali_friendly_3 }
		position = 13

		provinces_to_highlight = {
			owned_by = ROOT
			has_military_building = no
		}

		trigger = {
			event_target:ethiopia_event_target = {
				alliance_with = ROOT
				has_opinion = {
					who = ROOT
					value = 125
				}
			}
			army_size = 100
			army_professionalism = 0.4
			has_mil_advisor_3 = yes
			num_of_owned_provinces_with = {
				value = 25
				has_military_building = yes
			}
		}
		
		effect = {
			custom_tooltip = tm_mal_eth_dip_friendly_if_we_are
			if = {
				limit = {
					NOT = { event_target:mali_event_target = { mission_completed = mal_approach_to_ethiopia_friendly_4 } }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_any_time_we_are_allied_tt
				add_country_modifier = {
					name = tm_mal_eth_joint_military_alliance
					duration = -1
				}
				custom_tooltip = tm_ally_has_effects_too
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = tm_eth_mal_dip_friendly_if_they_have
			if = {
				limit = {
					event_target:mali_event_target = { mission_completed = mal_approach_to_ethiopia_friendly_4 }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_mal_eth_combined_military_might_tt
			}
			hidden_effect = {
				if = {
					limit = { NOT = { event_target:mali_event_target = { mission_completed = mal_approach_to_ethiopia_friendly_4 } } }
					add_country_modifier = {
						name = tm_mal_eth_joint_military_alliance
						duration = -1
					}
					set_country_flag = tm_mal_eth_joint_military_alliance_flag
					event_target:mali_event_target = {
						add_country_modifier = {
							name = tm_mal_eth_joint_military_alliance
							duration = -1
						}
						set_country_flag = tm_mal_eth_joint_military_alliance_flag
					}
				}
				if = {
					limit = { event_target:mali_event_target = { mission_completed = mal_approach_to_ethiopia_friendly_4 } }
					set_country_flag = tm_mal_eth_combined_military_might_flag
					event_target:mali_event_target = { set_country_flag = tm_mal_eth_combined_military_might_flag }
				}
			}
		}
	}
}


ethiopia_slot_2 = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = ETH
			tag = AKS
			tag = BTI
		}
	}
	has_country_shield = yes

	tm_eth_deal_with_adal = {
		icon = mission_impaled_soldies
		required_missions = { tm_eth_ready_for_conquest }
		position = 2

		provinces_to_highlight = {
			OR = {
				area = aussa_area
				area = ifat_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			aussa_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			ifat_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			custom_tooltip = tm_eth_unlocks_oman_dip_missions
			simple_dynamic_effect_without_alternative = {
				first_custom_tooltip = tm_eth_taken_adals_lands_tt
				first_limit = "
				aussa_area = {
					type = all
					country_or_non_sovereign_subject_holds = ROOT
				}
				ifat_area = {
					type = all
					country_or_non_sovereign_subject_holds = ROOT
				}"
				first_effect = "
				somaliland_area = { add_perma_claim = yes }
				ogaden_area = { add_perma_claim = yes }
				"
				#second_custom_tooltip = tm_eth_have_humiliated_ada_tt
				second_custom_tooltip = tm_eth_deal_with_adal_bt
				second_limit = "
				has_country_flag = tm_eth_humi_ada
				"
				second_effect = "
				add_prestige_or_monarch_power = { amount = 25 }
				change_ruler_stat = {
					type = dip
					amount = 1
				}
				"
			}
		}
	}

	tm_eth_unify_south_horn = {
		icon = mission_invade_kanem
		required_missions = { tm_eth_deal_with_adal }
		position = 3

		provinces_to_highlight = {
			OR = {
				area = somaliland_area
				area = ogaden_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			somaliland_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			ogaden_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			custom_tooltip = tm_eth_unlocks_butua_dip_missions
			ajuuran_area = { add_perma_claim = yes }
			mogadishu_area = { add_perma_claim = yes }
			majarteen_area = { add_perma_claim = yes }
		}
	}

	tm_eth_the_jewish_peoples = {
		icon = mission_rb_control_state_religion
		required_missions = {  }
		position = 4

		provinces_to_highlight = {
			OR = {
				province_id = 2771
				province_id = 2772
			}
			OR = {
				NOT = { owned_by = ROOT	}
				NOT = { has_missionary = yes }
			}
		}

		trigger = {
			owns = 2771
			owns = 2772
			OR = {
				AND = {
					2771 = {
						has_province_modifier = autonomy_increased
					}
					2772 = {
						has_province_modifier = autonomy_increased
					}
				}
				AND = {
					2771 = {
						religion = ROOT
					}
					2772 = {
						religion = ROOT
					}
				}
			}
		}

		effect = {
			country_event = {
				id = flavor_eth.40
				tooltip = tm_eth_jewish_peoples_event_tt
			}
		}
	}
}

ethiopia_coptic_slot_2 = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = ETH
			tag = AKS
			tag = BTI
		}
		NOT = { religion = jewish }
	}
	has_country_shield = yes

	
	tm_eth_coptic_mission_1 = {
		icon = mission_hands_praying
		required_missions = { tm_eth_the_jewish_peoples }
		position = 5

		provinces_to_highlight = {
			OR = {
				province_id = 1227
				province_id = 2767
				province_id = 2768
				province_id = 2771
				province_id = 2769
				province_id = 2772
				province_id = 1224
				province_id = 1223
				province_id = 1214
				province_id = 2770
				province_id = 2763
				province_id = 2762
				province_id = 1213
				province_id = 1214
				province_id = 2791
				province_id = 2761
				province_id = 2760
				province_id = 4158
				province_id = 2758
				province_id = 2759
				province_id = 2757
				province_id = 2756
				province_id = 1218
			}
			OR = {
				NOT = { country_or_non_sovereign_subject_holds = ROOT }
				NOT = { religion = ROOT }
			}
		}

		trigger = {
			custom_trigger_tooltip = {
				tooltip = tm_eth_convert_all_base_provinces_to_coptic_tt
				1227 = {
					country_or_non_sovereign_subject_holds = ROOT
					religion = ROOT
				}
				2767 = {
					country_or_non_sovereign_subject_holds = ROOT
					religion = ROOT
				}
				2768 = {
					country_or_non_sovereign_subject_holds = ROOT
					religion = ROOT
				}
				2771 = {
					country_or_non_sovereign_subject_holds = ROOT
					religion = ROOT
				}
				2769 = {
					country_or_non_sovereign_subject_holds = ROOT
					religion = ROOT
				}
				2772 = {
					country_or_non_sovereign_subject_holds = ROOT
					religion = ROOT
				}
				1224 = {
					country_or_non_sovereign_subject_holds = ROOT
					religion = ROOT
				}
				1223 = {
					country_or_non_sovereign_subject_holds = ROOT
					religion = ROOT
				}
				1214 = {
					country_or_non_sovereign_subject_holds = ROOT
					religion = ROOT
				}
				2770 = {
					country_or_non_sovereign_subject_holds = ROOT
					religion = ROOT
				}
				2763 = {
					country_or_non_sovereign_subject_holds = ROOT
					religion = ROOT
				}
				2762 = {
					country_or_non_sovereign_subject_holds = ROOT
					religion = ROOT
				}
				1213 = {
					country_or_non_sovereign_subject_holds = ROOT
					religion = ROOT
				}
				1214 = {
					country_or_non_sovereign_subject_holds = ROOT
					religion = ROOT
				}
				2791 = {
					country_or_non_sovereign_subject_holds = ROOT
					religion = ROOT
				}
				2761 = {
					country_or_non_sovereign_subject_holds = ROOT
					religion = ROOT
				}
				2760 = {
					country_or_non_sovereign_subject_holds = ROOT
					religion = ROOT
				}
				4158 = {
					country_or_non_sovereign_subject_holds = ROOT
					religion = ROOT
				}
				2758 = {
					country_or_non_sovereign_subject_holds = ROOT
					religion = ROOT
				}
				2759 = {
					country_or_non_sovereign_subject_holds = ROOT
					religion = ROOT
				}
				2757 = {
					country_or_non_sovereign_subject_holds = ROOT
					religion = ROOT
				}
				2756 = {
					country_or_non_sovereign_subject_holds = ROOT
					religion = ROOT
				}
				1218 = {
					country_or_non_sovereign_subject_holds = ROOT
					religion = ROOT
				}
			}
			
		}

		effect = {
			unlock_estate_privilege = {
				estate_privilege = estate_church_yakobs_churches
			}
		}
	}
}

ethiopia_jewish_slot_2 = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = ETH
			tag = AKS
			tag = BTI
		}
		religion = jewish
	}
	has_country_shield = yes

	
	tm_eth_jewish_mission_1 = {
		icon = mission_hands_praying
		required_missions = { tm_eth_the_jewish_peoples }
		position = 5

		provinces_to_highlight = {
			owned_by = ROOT
			NOT = { religion = ROOT }
		}

		trigger = {
			religious_unity = 0.20
			church_power = 30
		}

		effect = {
			define_advisor = {
				type = inquisitor
				skill = 3
				culture = ROOT
				religion = ROOT
				cost_multiplier = 0.25
			}
			add_church_power = 50
		}
	}
}

ethiopia_slot_2_production = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = ETH
			tag = AKS
			tag = BTI
		}
	}
	has_country_shield = yes

	tm_eth_building_production = {
		icon = mission_have_manufactories
		required_missions = { }
		position = 6

		provinces_to_highlight = {
			owned_by = ROOT
			NOT = { has_production_building_trigger = yes }
		}

		trigger = {
			OR = {
				production_income_percentage = 0.20
				production_efficiency = 0.15
			}
			num_of_owned_provinces_with = {
				value = 15
				has_production_building_trigger = yes
			}
		}

		effect = {
			custom_tooltip = tm_eth_building_production_reward_tt
			hidden_effect = {
				for = {
					amount = 5
					effect = "
						random_owned_province = {
							limit = {
								has_production_building_trigger = yes
								NOT = { has_building = counting_house }
							}
							add_building = counting_house
						}
					"
				}
				for = {
					amount = 10
					effect = "
						random_owned_province = {
							limit = {
								has_production_building_trigger = yes
							}
							add_base_production = 2
						}
					"
				}
			}
		}
	}

	tm_eth_african_manufactories = {
		icon = mission_rb_build_furnaces
		required_missions = { tm_eth_trade_1 tm_eth_building_production }
		position = 7

		provinces_to_highlight = {
			owned_by = ROOT
			NOT = { has_manufactory = yes }
		}

		trigger = {
			num_of_owned_provinces_with = {
				value = 20
				has_manufactory = yes
			}
		}

		effect = {
			change_innovativeness = 3
			add_country_modifier = {
				name = tm_eth_starting_industrialisation
				duration = 3650
			}
		}
	}

	tm_eth_upgrading_goods = {
		icon = mission_industria_sedera
		required_missions = { tm_eth_african_manufactories }
		position = 8

		provinces_to_highlight = {
			owned_by = ROOT
			prov_can_have_developed_good = yes
		}

		trigger = {
			custom_trigger_tooltip = {
				tooltip = trading_bonus_in_a_developed_good
				OR = {
					trading_bonus = { trade_goods = cheese value = yes }
					trading_bonus = { trade_goods = ale value = yes }
					trading_bonus = { trade_goods = olive_oil value = yes }
					trading_bonus = { trade_goods = books value = yes }
					trading_bonus = { trade_goods = armour value = yes }
					trading_bonus = { trade_goods = silverware value = yes }
					#trading_bonus = { trade_goods = chocolate value = yes }
					trading_bonus = { trade_goods = uniforms value = yes }
					trading_bonus = { trade_goods = perfume value = yes }
					trading_bonus = { trade_goods = jewellery value = yes }
					trading_bonus = { trade_goods = bronze value = yes }
					trading_bonus = { trade_goods = tailored_clothes value = yes }
					trading_bonus = { trade_goods = steel value = yes }
				}
			}
			num_of_owned_provinces_with = {
				value = 20
				prov_has_developed_good = yes
			}
		}

		effect = {
			change_innovativeness = 5
			add_years_of_owned_provinces_production_income = {
				years = 2
				trigger = {
					prov_has_developed_good = yes
				}
			}
			custom_tooltip = tm_eth_upgrading_goods_reward_a
			if = {
				limit = { trading_bonus = { trade_goods = cheese value = yes } }
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			custom_tooltip = tm_eth_upgrading_goods_reward_aa

			custom_tooltip = tm_eth_upgrading_goods_reward_b
			if = {
				limit = { trading_bonus = { trade_goods = ale value = yes } }
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			custom_tooltip = tm_eth_upgrading_goods_reward_bb
			
			custom_tooltip = tm_eth_upgrading_goods_reward_c
			if = {
				limit = { trading_bonus = { trade_goods = olive_oil value = yes } }
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			custom_tooltip = tm_eth_upgrading_goods_reward_cc
			
			custom_tooltip = tm_eth_upgrading_goods_reward_d
			if = {
				limit = { trading_bonus = { trade_goods = books value = yes } }
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			custom_tooltip = tm_eth_upgrading_goods_reward_dd
			
			custom_tooltip = tm_eth_upgrading_goods_reward_e
			if = {
				limit = { trading_bonus = { trade_goods = armour value = yes } }
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			custom_tooltip = tm_eth_upgrading_goods_reward_ee
			
			custom_tooltip = tm_eth_upgrading_goods_reward_f
			if = {
				limit = { trading_bonus = { trade_goods = silverware value = yes } }
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			custom_tooltip = tm_eth_upgrading_goods_reward_ff
			
			#custom_tooltip = tm_eth_upgrading_goods_reward_g
			#if = {
			#	limit = { trading_bonus = { trade_goods = chocolate value = yes } }
			#	custom_tooltip = BONUS_REWARD_YES
			#}
			#else = { custom_tooltip = BONUS_REWARD_NO }
			#tooltip = {
			#	add_treasury = 50
			#}
			
			custom_tooltip = tm_eth_upgrading_goods_reward_h
			if = {
				limit = { trading_bonus = { trade_goods = uniforms value = yes } }
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			custom_tooltip = tm_eth_upgrading_goods_reward_hh

			custom_tooltip = tm_eth_upgrading_goods_reward_i
			if = {
				limit = { trading_bonus = { trade_goods = perfume value = yes } }
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			custom_tooltip = tm_eth_upgrading_goods_reward_ii

			custom_tooltip = tm_eth_upgrading_goods_reward_j
			if = {
				limit = { trading_bonus = { trade_goods = jewellery value = yes } }
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			custom_tooltip = tm_eth_upgrading_goods_reward_jj

			custom_tooltip = tm_eth_upgrading_goods_reward_k
			if = {
				limit = { trading_bonus = { trade_goods = bronze value = yes } }
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			custom_tooltip = tm_eth_upgrading_goods_reward_kk

			custom_tooltip = tm_eth_upgrading_goods_reward_l
			if = {
				limit = { trading_bonus = { trade_goods = tailored_clothes value = yes } }
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			custom_tooltip = tm_eth_upgrading_goods_reward_ll

			custom_tooltip = tm_eth_upgrading_goods_reward_m
			if = {
				limit = { trading_bonus = { trade_goods = steel value = yes } }
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			custom_tooltip = tm_eth_upgrading_goods_reward_mm
			

			hidden_effect = {
				if = {
					limit = { trading_bonus = { trade_goods = cheese value = yes } }
					add_country_modifier = { name = tm_eth_cheese_trade duration = -1 }
				}
				if = {
					limit = { trading_bonus = { trade_goods = ale value = yes } }
					add_country_modifier = { name = tm_eth_ale_trade duration = -1 }
				}
				if = {
					limit = { trading_bonus = { trade_goods = olive_oil value = yes } }
					add_country_modifier = { name = tm_eth_olive_oil_trade duration = -1 }
				}
				if = {
					limit = { trading_bonus = { trade_goods = books value = yes } }
					add_country_modifier = { name = tm_eth_book_trade duration = -1 }
				}
				if = {
					limit = { trading_bonus = { trade_goods = armour value = yes } }
					add_country_modifier = { name = tm_eth_armour_trade duration = -1 }
				}
				if = {
					limit = { trading_bonus = { trade_goods = silverware value = yes } }
					add_country_modifier = { name = tm_eth_silverware_trade duration = -1 }
				}
				#if = {
				#	limit = { trading_bonus = { trade_goods = chocolate value = yes } }
				#	add_country_modifier = { name = tm_eth_chocolate_trade duration = -1 }
				#}
				if = {
					limit = { trading_bonus = { trade_goods = uniforms value = yes } }
					add_country_modifier = { name = tm_eth_uniforms_trade duration = -1 }
				}
				if = {
					limit = { trading_bonus = { trade_goods = perfume value = yes } }
					add_country_modifier = { name = tm_eth_perfume_trade duration = -1 }
				}
				if = {
					limit = { trading_bonus = { trade_goods = jewellery value = yes } }
					add_country_modifier = { name = tm_eth_jewellery_trade duration = -1 }
				}
				if = {
					limit = { trading_bonus = { trade_goods = bronze value = yes } }
					add_country_modifier = { name = tm_eth_bronze_trade duration = -1 }
				}
				if = {
					limit = { trading_bonus = { trade_goods = tailored_clothes value = yes } }
					add_country_modifier = { name = tm_eth_tailored_clothes_trade duration = -1 }
				}
				if = {
					limit = { trading_bonus = { trade_goods = steel value = yes } }
					add_country_modifier = { name = tm_eth_steel_trade duration = -1 }
				}
			}
		}
	}
}

ethiopia_slot_mam_dip_2 = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = ETH
			tag = AKS
			tag = BTI
		}
	}
	has_country_shield = yes

	tm_eth_open_diplomacy_with_the_mamluks = {
		icon = mam_great_power
		required_missions = { }
		position = 9

		provinces_to_highlight = {
			is_capital_of = event_target:mamluks_event_target
		}

		trigger = {
			mission_completed = tm_eth_unite_the_tribes
			if = {
				limit = {
					NOT = {
						calc_true_if = {
							amount = 2

							has_country_flag = tm_eth_friendly_mal
							has_country_flag = tm_eth_friendly_to_mams
							has_country_flag = tm_eth_friendly_rzw
						}
					}
				}
				OR = {
					event_target:mamluks_event_target = {
						alliance_with = ROOT
						has_opinion = {
							who = ROOT
							value = 100
						}
					}
					event_target:mamluks_event_target = {
						has_been_insulted_by_root = yes
					}
				}
			}
			else = {
				event_target:mamluks_event_target = {
					has_been_insulted_by_root = yes
				}
			}
		}
		
		effect = {
			custom_tooltip = tm_eth_at_most_2_ally_paths_tt
			custom_tooltip = tm_mal_eth_dip_hostile_choice_reward_first_mission
			if = {
				limit = {
					event_target:mamluks_event_target = { has_been_insulted_by_root = yes }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				define_advisor = {
					type = army_reformer
					skill = 2
					discount = yes
				}
				custom_tooltip = tm_eth_unlock_hostile_mam
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = tm_mal_eth_dip_friendly_choice_reward_first_mission
			if = {
				limit = {
					event_target:mamluks_event_target = { alliance_with = ROOT }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				define_advisor = {
					type = diplomat
					skill = 3
					cost_multiplier = 0.33
					religion = event_target:mamluks_event_target
					culture = event_target:mamluks_event_target
				}
				custom_tooltip = tm_ally_has_effects_too
				add_historical_friend = event_target:mamluks_event_target
				custom_tooltip = tm_eth_unlock_friendly_mam
			}
			hidden_effect = {
				if = {
					limit = { event_target:mamluks_event_target = { has_been_insulted_by_root = yes } }
					define_advisor = {
						type = army_reformer
						skill = 2
						discount = yes
						culture = ROOT
						religion = ROOT
					}
					set_country_flag = tm_eth_hostile_to_mams
					swap_non_generic_missions = yes
				}
				else = {
					add_historical_friend = event_target:mamluks_event_target
					define_advisor = {
						type = diplomat
						skill = 3
						cost_multiplier = 0.33
						religion = event_target:mamluks_event_target
						culture = event_target:mamluks_event_target
					}
					event_target:mamluks_event_target = {
						define_advisor = {
							type = diplomat
							skill = 3
							cost_multiplier = 0.33
							religion = ROOT
							culture = ROOT
						}
					}
					set_country_flag = tm_eth_friendly_to_mams
					swap_non_generic_missions = yes
				}
			}
		}
	}
}

ethiopia_slot_mam_dip_2_placeholders = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = ETH
			tag = AKS
			tag = BTI
		}
		NOT = { has_country_flag = tm_eth_hostile_to_mams }
		NOT = { has_country_flag = tm_eth_friendly_to_mams }
	}
	has_country_shield = yes

	tm_eth_diplomacy_with_mams_placeholder_1 = {
		icon = mission_locked_mission
		required_missions = { tm_eth_open_diplomacy_with_the_mamluks }
		position = 10

		provinces_to_highlight = {}

		trigger = {
			custom_trigger_tooltip = {
				tooltip = tm_eth_mam_dip_branching
				always = no 
			}
		}
		
		effect = {
			custom_tooltip = tm_mal_eth_dip_hostile_choice_reward
			tooltip = {
				said_area = { add_perma_claim = yes }
				gulf_of_arabia_area = { add_perma_claim = yes }
				vostani_area = { add_perma_claim = yes }
				bahari_area = { add_perma_claim = yes }
				add_country_modifier = {
					name = eth_coptic_offense
					duration = 5475
				}
			}
			custom_tooltip = tm_mal_eth_dip_friendly_choice_reward
			custom_tooltip = tm_mal_eth_dip_friendly_if_we_are
			if = {
				limit = {
					NOT = { event_target:mamluks_event_target = { mission_completed = tm_mam_ally_eth_1 } }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_eth_mam_ally_trade_1_tt
				custom_tooltip = tm_ally_has_effects_too
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = tm_eth_mam_dip_friendly_if_they_have
			if = {
				limit = {
					event_target:mamluks_event_target = { mission_completed = tm_mam_ally_eth_1 }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_eth_dip_advisors_give_trade_eff
				custom_tooltip = tm_any_time_we_are_allied_tt
				add_country_modifier = {
					name = tm_eth_trading_agreements
					duration = -1
				}
				custom_tooltip = tm_ally_has_effects_too
			}
		}
	}
	tm_eth_diplomacy_with_mams_placeholder_2 = {
		icon = mission_locked_mission
		required_missions = { tm_eth_diplomacy_with_mams_placeholder_1 }
		position = 11

		provinces_to_highlight = {}

		trigger = {
			custom_trigger_tooltip = {
				tooltip = tm_eth_mam_dip_branching
				always = no 
			}
		}
		
		effect = {
			custom_tooltip = tm_mal_eth_dip_hostile_choice_reward
			tooltip = {
				egypt_region = { add_perma_claim = yes }
				add_accepted_culture_or_dip_power = {
					culture = al_misr_arabic
					free = yes
				}
				add_stability_or_adm_power = yes
			}
			custom_tooltip = tm_mal_eth_dip_friendly_choice_reward
			custom_tooltip = tm_mal_eth_dip_friendly_if_we_are
			if = {
				limit = {
					NOT = { event_target:mamluks_event_target = { mission_completed = tm_mam_ally_eth_2 } }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_eth_expand_nile_farming_1
				add_province_modifier = {
					name = tm_eth_expand_nile_floodplains_1
					duration = -1
				}
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = tm_eth_mam_dip_friendly_if_they_have
			if = {
				limit = {
					event_target:mamluks_event_target = { mission_completed = tm_mam_ally_eth_2 }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_the_previous_modifier_is_doubled
			}
		}
	}
	tm_eth_diplomacy_with_mams_placeholder_3 = {
		icon = mission_locked_mission
		required_missions = { tm_eth_diplomacy_with_mams_placeholder_2 }
		position = 12

		provinces_to_highlight = {}

		trigger = {
			custom_trigger_tooltip = {
				tooltip = tm_eth_mam_dip_branching
				always = no 
			}
		}
		
		effect = {
			custom_tooltip = tm_mal_eth_dip_hostile_choice_reward
			tooltip = {
				add_prestige_or_monarch_power = { amount = 30 }
				add_country_modifier = {
					name = eth_legacy_of_alexandria
					duration = 7300
				}
			}
			custom_tooltip = tm_mal_eth_dip_friendly_choice_reward
			custom_tooltip = tm_mal_eth_dip_friendly_if_we_are
			if = {
				limit = {
					NOT = { event_target:mamluks_event_target = { mission_completed = tm_mam_ally_eth_3 } }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				2758 = { change_trade_goods = gold }
				1211 = { change_trade_goods = tin }
				2778 = { change_trade_goods = iron }
				1207 = { change_trade_goods = iron }
				event_target:mamluks_event_target = {
					365 = { change_trade_goods = gold }
					2317 = { change_trade_goods = tin }
					2315 = { change_trade_goods = iron }
					359 = { change_trade_goods = iron }
				}
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = tm_eth_mam_dip_friendly_if_they_have
			if = {
				limit = {
					event_target:mamluks_event_target = { mission_completed = tm_mam_ally_eth_3 }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_eth_mam_metal_production
				add_province_modifier = {
					name = tm_eth_mam_metal_production_modifier
					duration = -1
				}
				custom_tooltip = tm_ally_has_effects_too
			}
		}
	}
	tm_eth_diplomacy_with_mams_placeholder_4 = {
		icon = mission_locked_mission
		required_missions = { tm_eth_diplomacy_with_mams_placeholder_3 }
		position = 13

		provinces_to_highlight = {}

		trigger = {
			custom_trigger_tooltip = {
				tooltip = tm_eth_mam_dip_branching
				always = no 
			}
		}
		
		effect = {
			custom_tooltip = tm_mal_eth_dip_hostile_choice_reward
			tooltip = {
				add_country_modifier = {
					name = tm_eth_conquerer_of_egypt
					duration = -1
				}
				add_power_projection = {
					type = 10_permanent_power_projection
					amount = 10
				}
				custom_tooltip = sca_scandinavian_european_empire_tt
				if = { limit = { NOT = { 361 = { country_or_non_sovereign_subject_holds = ROOT } } } custom_tooltip = tm_eth_control_cairo }
				361 = {
					if = {
						limit = { country_or_non_sovereign_subject_holds = ROOT }
						if = {
							limit = {
								NOT = {
									has_great_project = {
										type = pyramid_of_cheops
										tier = 3
									}
								}
							}
							add_great_project_tier = {
								type = pyramid_of_cheops
								tier = 1
							}
						}
						else = {
							add_random_development = 3
						}
					}
				}
			}
			custom_tooltip = tm_mal_eth_dip_friendly_choice_reward
			custom_tooltip = tm_mal_eth_dip_friendly_if_we_are
			if = {
				limit = {
					NOT = { event_target:mamluks_event_target = { mission_completed = tm_mam_ally_eth_4 } }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_any_time_we_are_allied_tt
				add_country_modifier = {
					name = tm_eth_mam_naval_cooperation_modifier_1
					duration = -1
				}
				custom_tooltip = tm_ally_has_effects_too
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = tm_eth_mam_dip_friendly_if_they_have
			if = {
				limit = {
					event_target:mamluks_event_target = { mission_completed = tm_mam_ally_eth_4 }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_any_time_we_are_allied_tt
				add_country_modifier = {
					name = tm_eth_mam_naval_cooperation_modifier_2
					duration = -1
				}
				custom_tooltip = tm_ally_has_effects_too
			}
		}
	}
}

ethiopia_slot_mam_dip_2_hostile = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = ETH
			tag = AKS
			tag = BTI
		}
		has_country_flag = tm_eth_hostile_to_mams
	}
	has_country_shield = yes

	tm_eth_hostile_to_mams_1 = {
		icon = mam_recruit_the_mamluks
		required_missions = { tm_eth_open_diplomacy_with_the_mamluks }
		position = 10

		provinces_to_highlight = {}

		trigger = {
			has_mil_advisor_2 = yes
			army_size_percentage = 0.75
			army_size = 30
			manpower = 20
		}
		
		effect = {
			said_area = { add_perma_claim = yes }
			gulf_of_arabia_area = { add_perma_claim = yes }
			vostani_area = { add_perma_claim = yes }
			bahari_area = { add_perma_claim = yes }
			add_country_modifier = {
				name = eth_coptic_offense
				duration = 5475
			}
		}
	}
	tm_eth_hostile_to_mams_2 = {
		icon = mission_se_along_the_river
		required_missions = { tm_eth_hostile_to_mams_1 }
		position = 11

		provinces_to_highlight = {
			region = egypt_region
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 15
				region = egypt_region
			}
		}
		
		effect = {
			egypt_region = { add_perma_claim = yes }
			add_accepted_culture_or_dip_power = {
				culture = al_misr_arabic
				free = yes
			}
			add_stability_or_adm_power = yes
		}
	}
	tm_eth_hostile_to_mams_3 = {
		icon = mission_egyptian_mamluk_soldier
		required_missions = { tm_eth_hostile_to_mams_2 }
		position = 12

		provinces_to_highlight = {
			OR = {
				province_id = 358
				AND = {
					region = egypt_region
					NOT = {
						ROOT = {
							num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
								value = 30
								region = egypt_region
							}
						}
					}
				}
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 30
				region = egypt_region
			}
			358 = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		effect = {
			add_prestige_or_monarch_power = { amount = 30 }
			add_country_modifier = {
				name = eth_legacy_of_alexandria
				duration = 7300
			}
		}
	}
	tm_eth_hostile_to_mams_4 = {
		icon = mission_break_the_mamluks
		required_missions = { tm_eth_hostile_to_mams_3 }
		position = 13

		provinces_to_highlight = {
			region = egypt_region
			country_or_non_sovereign_subject_holds = ROOT
			OR = {
				nationalism = 5
				local_autonomy = 50
				NOT = {
					OR = {
						has_owner_accepted_culture = yes
						primary_culture = ROOT
					}
				}
			}
		}

		trigger = {
			num_of_owned_provinces_with = {
				value = 35
				region = egypt_region
				NOT = { nationalism = 5 }
				NOT = { local_autonomy = 50 }
				OR = {
					has_owner_accepted_culture = yes
					primary_culture = ROOT
				}
			}
		}
		
		effect = {
			if = { limit = { NOT = { 361 = { country_or_non_sovereign_subject_holds = ROOT } } } custom_tooltip = tm_eth_control_cairo }
			361 = {
				if = {
					limit = { country_or_non_sovereign_subject_holds = ROOT }
					if = {
						limit = {
							NOT = {
								has_great_project = {
									type = pyramid_of_cheops
									tier = 3
								}
							}
						}
						add_great_project_tier = {
							type = pyramid_of_cheops
							tier = 1
						}
					}
					else = {
						add_random_development = 3
					}
				}
			}
			add_country_modifier = {
				name = tm_eth_conquerer_of_egypt
				duration = -1
			}
			add_power_projection = {
				type = 10_permanent_power_projection
				amount = 10
			}
			custom_tooltip = sca_scandinavian_european_empire_tt
		}
	}
}

ethiopia_slot_mam_dip_2_friendly = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = ETH
			tag = AKS
			tag = BTI
		}
		has_country_flag = tm_eth_friendly_to_mams
	}
	has_country_shield = yes

	tm_eth_friendly_to_mams_1 = {
		icon = mission_market_place_with_asian_traders
		required_missions = { tm_eth_open_diplomacy_with_the_mamluks }
		position = 10

		provinces_to_highlight = {
			owned_by = ROOT
			province_has_center_of_trade_of_level = 1
			NOT = { province_has_center_of_trade_of_level = 2 }
		}

		trigger = {
			event_target:mamluks_event_target = {
				alliance_with = ROOT
				has_opinion = {
					who = ROOT
					value = 125
				}
				trust = {
					who = ROOT
					value = 75
				}
			}

			num_of_owned_provinces_with = {
				value = 8
				has_trade_building_trigger = yes
				development = 10
			}
			trader = 2
		}
		
		effect = {
			custom_tooltip = tm_mal_eth_dip_friendly_if_we_are
			if = {
				limit = {
					NOT = { event_target:mamluks_event_target = { mission_completed = tm_mam_ally_eth_1 } }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_eth_mam_ally_trade_1_tt
				custom_tooltip = tm_ally_has_effects_too
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = tm_eth_mam_dip_friendly_if_they_have
			if = {
				limit = {
					event_target:mamluks_event_target = { mission_completed = tm_mam_ally_eth_1 }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_eth_dip_advisors_give_trade_eff
				custom_tooltip = tm_any_time_we_are_allied_tt
				add_country_modifier = {
					name = tm_eth_trading_agreements
					duration = -1
				}
				custom_tooltip = tm_ally_has_effects_too
			}
			hidden_effect = {
				if = {
					limit = { NOT = { event_target:mamluks_event_target = { mission_completed = tm_mam_ally_eth_1 } } }
					for = {
						amount = 5
						effect = "
						random_owned_province = {
							limit = {
								development = 10
								has_trade_building_trigger = yes
							}
							upgrade_building = { trade = yes }
							add_base_production = 3
						}
						"
					}
					event_target:mamluks_event_target = {
						for = {
							amount = 5
							effect = "
							random_owned_province = {
								limit = {
									development = 10
									has_trade_building_trigger = yes
								}
								upgrade_building = { trade = yes }
								add_base_production = 3
							}
							"
						}
					}
				}
				if = {
					limit = { event_target:mamluks_event_target = { mission_completed = tm_mam_ally_eth_1 } }
					set_country_flag = tm_dip_advisors_give_trade_eff
					event_target:mamluks_event_target = { set_country_flag = tm_dip_advisors_give_trade_eff }
					add_country_modifier = {
						name = tm_eth_trading_agreements
						duration = -1
					}
					set_country_flag = tm_eth_mam_trading_agreements
					event_target:mamluks_event_target = {
						add_country_modifier = {
							name = tm_eth_trading_agreements
							duration = -1
						}
						set_country_flag = tm_eth_mam_trading_agreements
					}
				}
			}
		}
	}

	tm_eth_friendly_to_mams_2 = {
		icon = mission_pue_irrigation_cannals
		required_missions = { tm_eth_friendly_to_mams_1 }
		position = 11

		provinces_to_highlight = {
			OR = {
				province_id = 362
				province_id = 363
				province_id = 2316
				province_id = 361
				province_id = 359
				province_id = 2317
				province_id = 2319
				province_id = 4320
				province_id = 360
				province_id = 4319
				province_id = 1231
				province_id = 1234
				province_id = 2322
				province_id = 1228
				province_id = 5178
				province_id = 5177
				province_id = 5179
				province_id = 2797
				province_id = 2798
				province_id = 1222
				province_id = 2799
				province_id = 1217
			}
		}

		trigger = {
			event_target:mamluks_event_target = {
				alliance_with = ROOT
				has_opinion = {
					who = ROOT
					value = 125
				}
			}
			custom_trigger_tooltip = {
				tooltip = tm_eth_mam_own_nile
				362  = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:mamluks_event_target} }
				363  = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:mamluks_event_target} }
				2316 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:mamluks_event_target} }
				361  = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:mamluks_event_target} }
				359  = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:mamluks_event_target} }
				2317 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:mamluks_event_target} }
				2319 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:mamluks_event_target} }
				4320 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:mamluks_event_target} }
				360  = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:mamluks_event_target} }
				4319 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:mamluks_event_target} }
				1231 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:mamluks_event_target} }
				1234 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:mamluks_event_target} }
				2322 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:mamluks_event_target} }
				1228 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:mamluks_event_target} }
				5178 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:mamluks_event_target} }
				5177 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:mamluks_event_target} }
				5179 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:mamluks_event_target} }
				2797 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:mamluks_event_target} }
				2798 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:mamluks_event_target} }
				1222 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:mamluks_event_target} }
				2799 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:mamluks_event_target} }
				1217 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:mamluks_event_target} }
			}
			custom_trigger_tooltip = {
				tooltip = tm_eth_mam_dev_nil
				calc_true_if = {
					amount = 10

					362  = { is_prosperous = yes num_of_times_improved = 1 num_of_buildings_in_province = 1 }
					363  = { is_prosperous = yes num_of_times_improved = 1 num_of_buildings_in_province = 1 }
					2316 = { is_prosperous = yes num_of_times_improved = 1 num_of_buildings_in_province = 1 }
					361  = { is_prosperous = yes num_of_times_improved = 1 num_of_buildings_in_province = 1 }
					359  = { is_prosperous = yes num_of_times_improved = 1 num_of_buildings_in_province = 1 }
					2317 = { is_prosperous = yes num_of_times_improved = 1 num_of_buildings_in_province = 1 }
					2319 = { is_prosperous = yes num_of_times_improved = 1 num_of_buildings_in_province = 1 }
					4320 = { is_prosperous = yes num_of_times_improved = 1 num_of_buildings_in_province = 1 }
					360  = { is_prosperous = yes num_of_times_improved = 1 num_of_buildings_in_province = 1 }
					4319 = { is_prosperous = yes num_of_times_improved = 1 num_of_buildings_in_province = 1 }
					1231 = { is_prosperous = yes num_of_times_improved = 1 num_of_buildings_in_province = 1 }
					1234 = { is_prosperous = yes num_of_times_improved = 1 num_of_buildings_in_province = 1 }
					2322 = { is_prosperous = yes num_of_times_improved = 1 num_of_buildings_in_province = 1 }
					1228 = { is_prosperous = yes num_of_times_improved = 1 num_of_buildings_in_province = 1 }
					5178 = { is_prosperous = yes num_of_times_improved = 1 num_of_buildings_in_province = 1 }
					5177 = { is_prosperous = yes num_of_times_improved = 1 num_of_buildings_in_province = 1 }
					5179 = { is_prosperous = yes num_of_times_improved = 1 num_of_buildings_in_province = 1 }
					2797 = { is_prosperous = yes num_of_times_improved = 1 num_of_buildings_in_province = 1 }
					2798 = { is_prosperous = yes num_of_times_improved = 1 num_of_buildings_in_province = 1 }
					1222 = { is_prosperous = yes num_of_times_improved = 1 num_of_buildings_in_province = 1 }
					2799 = { is_prosperous = yes num_of_times_improved = 1 num_of_buildings_in_province = 1 }
					1217 = { is_prosperous = yes num_of_times_improved = 1 num_of_buildings_in_province = 1 }
				}
			}
		}
		
		effect = {
			custom_tooltip = tm_mal_eth_dip_friendly_if_we_are
			if = {
				limit = {
					NOT = { event_target:mamluks_event_target = { mission_completed = tm_mam_ally_eth_2 } }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_eth_expand_nile_farming_1
				add_province_modifier = {
					name = tm_eth_expand_nile_floodplains_1
					duration = -1
				}
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = tm_eth_mam_dip_friendly_if_they_have
			if = {
				limit = {
					event_target:mamluks_event_target = { mission_completed = tm_mam_ally_eth_2 }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_the_previous_modifier_is_doubled
			}
			hidden_effect = {
				if = {
					limit = { NOT = { event_target:mamluks_event_target = { mission_completed = tm_mam_ally_eth_2 } } }
					362  = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_1 duration = -1 } }
					363  = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_1 duration = -1 } }
					2316 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_1 duration = -1 } }
					361  = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_1 duration = -1 } }
					359  = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_1 duration = -1 } }
					2317 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_1 duration = -1 } }
					2319 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_1 duration = -1 } }
					4320 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_1 duration = -1 } }
					360  = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_1 duration = -1 } }
					4319 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_1 duration = -1 } }
					1231 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_1 duration = -1 } }
					1234 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_1 duration = -1 } }
					2322 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_1 duration = -1 } }
					1228 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_1 duration = -1 } }
					5178 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_1 duration = -1 } }
					5177 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_1 duration = -1 } }
					5179 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_1 duration = -1 } }
					2797 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_1 duration = -1 } }
					2798 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_1 duration = -1 } }
					1222 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_1 duration = -1 } }
					2799 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_1 duration = -1 } }
					1217 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_1 duration = -1 } }
				}
				if = {
					limit = { event_target:mamluks_event_target = { mission_completed = tm_mam_ally_eth_2 } }
					362  = { remove_province_modifier = tm_eth_expand_nile_floodplains_1 }
					363  = { remove_province_modifier = tm_eth_expand_nile_floodplains_1 }
					2316 = { remove_province_modifier = tm_eth_expand_nile_floodplains_1 }
					361  = { remove_province_modifier = tm_eth_expand_nile_floodplains_1 }
					359  = { remove_province_modifier = tm_eth_expand_nile_floodplains_1 }
					2317 = { remove_province_modifier = tm_eth_expand_nile_floodplains_1 }
					2319 = { remove_province_modifier = tm_eth_expand_nile_floodplains_1 }
					4320 = { remove_province_modifier = tm_eth_expand_nile_floodplains_1 }
					360  = { remove_province_modifier = tm_eth_expand_nile_floodplains_1 }
					4319 = { remove_province_modifier = tm_eth_expand_nile_floodplains_1 }
					1231 = { remove_province_modifier = tm_eth_expand_nile_floodplains_1 }
					1234 = { remove_province_modifier = tm_eth_expand_nile_floodplains_1 }
					2322 = { remove_province_modifier = tm_eth_expand_nile_floodplains_1 }
					1228 = { remove_province_modifier = tm_eth_expand_nile_floodplains_1 }
					5178 = { remove_province_modifier = tm_eth_expand_nile_floodplains_1 }
					5177 = { remove_province_modifier = tm_eth_expand_nile_floodplains_1 }
					5179 = { remove_province_modifier = tm_eth_expand_nile_floodplains_1 }
					2797 = { remove_province_modifier = tm_eth_expand_nile_floodplains_1 }
					2798 = { remove_province_modifier = tm_eth_expand_nile_floodplains_1 }
					1222 = { remove_province_modifier = tm_eth_expand_nile_floodplains_1 }
					2799 = { remove_province_modifier = tm_eth_expand_nile_floodplains_1 }
					1217 = { remove_province_modifier = tm_eth_expand_nile_floodplains_1 }
					362  = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_2 duration = -1 } }
					363  = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_2 duration = -1 } }
					2316 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_2 duration = -1 } }
					361  = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_2 duration = -1 } }
					359  = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_2 duration = -1 } }
					2317 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_2 duration = -1 } }
					2319 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_2 duration = -1 } }
					4320 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_2 duration = -1 } }
					360  = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_2 duration = -1 } }
					4319 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_2 duration = -1 } }
					1231 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_2 duration = -1 } }
					1234 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_2 duration = -1 } }
					2322 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_2 duration = -1 } }
					1228 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_2 duration = -1 } }
					5178 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_2 duration = -1 } }
					5177 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_2 duration = -1 } }
					5179 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_2 duration = -1 } }
					2797 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_2 duration = -1 } }
					2798 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_2 duration = -1 } }
					1222 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_2 duration = -1 } }
					2799 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_2 duration = -1 } }
					1217 = { add_province_modifier = { name = tm_eth_expand_nile_floodplains_2 duration = -1 } }
				}
			}
		}
	}

	tm_eth_friendly_to_mams_3 = {
		icon = mission_kon_anzikus_copper
		required_missions = { tm_eth_friendly_to_mams_2 }
		position = 12

		provinces_to_highlight = {
			owned_by = ROOT
			OR = {
				trade_goods = gold
				prov_has_metal_good = yes
			}
			OR = {
				NOT = { development = 15 }
				NOT = {
					OR = {
						has_production_building_trigger = yes
						num_of_buildings_in_province = 2
					}
				}
			}
		}

		trigger = {
			event_target:mamluks_event_target = {
				alliance_with = ROOT
				has_opinion = {
					who = ROOT
					value = 125
				}
			}
			num_of_owned_provinces_with = {
				value = 8
				OR = {
					trade_goods = gold
					prov_has_metal_good = yes
				}
				development = 15
				OR = {
					has_production_building_trigger = yes
					num_of_buildings_in_province = 2
				}
			}
		}
		
		effect = {
			custom_tooltip = tm_mal_eth_dip_friendly_if_we_are
			if = {
				limit = {
					NOT = { event_target:mamluks_event_target = { mission_completed = tm_mam_ally_eth_3 } }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				2758 = { change_trade_goods = gold }
				1211 = { change_trade_goods = tin }
				2778 = { change_trade_goods = iron }
				1207 = { change_trade_goods = iron }
				event_target:mamluks_event_target = {
					365 = { change_trade_goods = gold }
					2317 = { change_trade_goods = tin }
					2315 = { change_trade_goods = iron }
					359 = { change_trade_goods = iron }
				}
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = tm_eth_mam_dip_friendly_if_they_have
			if = {
				limit = {
					event_target:mamluks_event_target = { mission_completed = tm_mam_ally_eth_3 }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_eth_mam_metal_production
				add_province_modifier = {
					name = tm_eth_mam_metal_production_modifier
					duration = -1
				}
				custom_tooltip = tm_ally_has_effects_too
			}
			hidden_effect = {
				if = {
					limit = { NOT = { event_target:mamluks_event_target = { mission_completed = tm_mam_ally_eth_3 } } }
					2758 = { change_trade_goods = gold }
					1211 = { change_trade_goods = tin }
					2778 = { change_trade_goods = iron }
					365 = { change_trade_goods = gold }
					2317 = { change_trade_goods = tin }
					2315 = { change_trade_goods = iron }
				}
				if = {
					limit = { event_target:mamluks_event_target = { mission_completed = tm_mam_ally_eth_3 } }
					for = {
						amount = 3
						effect = "
						random_owned_province = {
							limit = {
								prov_has_metal_good = yes
								NOT = { has_province_modifier = tm_eth_mam_metal_production_modifier }
							}
							add_province_modifier = {
								name = tm_eth_mam_metal_production_modifier
								duration = -1
							}
						}
						"
					}
					event_target:mamluks_event_target = {
						for = {
							amount = 3
							effect = "
							random_owned_province = {
								limit = {
									prov_has_metal_good = yes
									NOT = { has_province_modifier = tm_eth_mam_metal_production_modifier }
								}
								add_province_modifier = {
									name = tm_eth_mam_metal_production_modifier
									duration = -1
								}
							}
							"
						}
					}
				}
			}
		}
	}

	tm_eth_friendly_to_mams_4 = {
		icon = mission_arabian_trade
		required_missions = { tm_eth_friendly_to_mams_3 }
		position = 13

		provinces_to_highlight = {
			owned_by = ROOT
			has_navy_building = no
			has_port = yes
		}

		trigger = {
			event_target:mamluks_event_target = {
				alliance_with = ROOT
				has_opinion = {
					who = ROOT
					value = 125
				}
			}
			num_of_owned_provinces_with = {
				value = 10
				has_navy_building = yes
				base_production = 5
			}
		}
		
		effect = {
			custom_tooltip = tm_mal_eth_dip_friendly_if_we_are
			if = {
				limit = {
					NOT = { event_target:mamluks_event_target = { mission_completed = tm_mam_ally_eth_4 } }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_any_time_we_are_allied_tt
				add_country_modifier = {
					name = tm_eth_mam_naval_cooperation_modifier_1
					duration = -1
				}
				custom_tooltip = tm_ally_has_effects_too
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = tm_eth_mam_dip_friendly_if_they_have
			if = {
				limit = {
					event_target:mamluks_event_target = { mission_completed = tm_mam_ally_eth_4 }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_any_time_we_are_allied_tt
				add_country_modifier = {
					name = tm_eth_mam_naval_cooperation_modifier_2
					duration = -1
				}
				custom_tooltip = tm_ally_has_effects_too
			}
			hidden_effect = {
				if = {
					limit = { NOT = { event_target:mamluks_event_target = { mission_completed = tm_mam_ally_eth_4 } } }
					add_country_modifier = { name = tm_eth_mam_naval_cooperation_modifier_1 duration = -1 }
					set_country_flag = tm_eth_mam_navy_coop_1
					event_target:mamluks_event_target = {
						add_country_modifier = { name = tm_eth_mam_naval_cooperation_modifier_1 duration = -1 }
						set_country_flag = tm_eth_mam_navy_coop_1
					}
				}
				if = {
					limit = { event_target:mamluks_event_target = { mission_completed = tm_mam_ally_eth_4 } }
					clr_country_flag = tm_eth_mam_navy_coop_1
					set_country_flag = tm_eth_mam_navy_coop_2
					remove_country_modifier = tm_eth_mam_naval_cooperation_modifier_1
					add_country_modifier = { name = tm_eth_mam_naval_cooperation_modifier_2 duration = -1 }
					event_target:mamluks_event_target = {
						clr_country_flag = tm_eth_mam_navy_coop_1
						set_country_flag = tm_eth_mam_navy_coop_2
						remove_country_modifier = tm_eth_mam_naval_cooperation_modifier_1
						add_country_modifier = { name = tm_eth_mam_naval_cooperation_modifier_2 duration = -1 }
					}
				}
			}
		}
	}
}

aksum_slot_2 = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		tag = AKS
	}
	has_country_shield = yes

	tm_eth_aksum_2 = {
		icon = byz_reinforce_constantinople
		required_missions = { tm_eth_aksum }
		position = 14

		provinces_to_highlight = {
			
		}

		trigger = {
			num_of_owned_provinces_with = {
				value = 15
				fort_level = 2
				OR = {
					has_building = guardhouse
					has_building = armoury
					has_building = ramparts_tm
				}
			}
		}
		
		effect = {
			add_country_modifier = {
				name = tm_eth_fortified_lands
				duration = -1
			}
			set_country_flag = tm_mil_advisor_gives_defensiveness
			custom_tooltip = tm_mil_advisor_gives_defensiveness_tt
		}
	}
}

semien_slot_2 = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		tag = BTI
	}
	has_country_shield = yes

	tm_eth_semien_2 = {
		icon = victor_for_the_true_faith
		required_missions = { tm_eth_semien }
		position = 14

		provinces_to_highlight = {
			
		}

		trigger = {
			monthly_income = 100
			manpower = 100
			num_of_owned_provinces_with = {
				value = 30
				development = 15
			}
		}
		
		effect = {
			add_manpower = -30
			add_country_modifier = {
				name = tm_eth_safehaven_for_jewish_peoples
				duration = -1
			}
		}
	}
}



ethiopia_slot_3 = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = ETH
			tag = AKS
			tag = BTI
		}
	}
	has_country_shield = yes

	tm_eth_ready_for_conquest = {
		icon = mission_build_up_to_force_limit
		required_missions = { }
		position = 1

		provinces_to_highlight = {}

		trigger = {
			army_size_percentage = 0.9
			num_of_generals = 1
			num_of_cawa = 3
		}
		
		effect = {
			red_sea_coast_area = { add_core = ROOT }
			aussa_area = { add_perma_claim = yes }
			ifat_area = { add_perma_claim = yes }
			sennar_area = { add_perma_claim = yes }
			upper_nubia_area = { add_perma_claim = yes }
		}
	}

	tm_eth_strike_the_tribes = {
		icon = mission_conquer_benin
		required_missions = { tm_eth_ready_for_conquest }
		position = 2

		provinces_to_highlight = {
			OR = {
				area = sennar_area
				area = upper_nubia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			is_city = yes
		}

		trigger = {
			sennar_area = {
				type = all
				OR = {
					country_or_non_sovereign_subject_holds = ROOT
					NOT = { is_city = yes }
				}
			}
			upper_nubia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			dongola_area = { add_perma_claim = yes }
			shendy_area = { add_perma_claim = yes }
			add_accepted_culture_or_dip_power = { culture = nubian dip_reward = yes }
			create_colony_mission_reward = {
				province = 1217
			}
		}
	}

	tm_eth_unite_the_tribes = {
		icon = mission_mal_fighting_musa
		required_missions = { tm_eth_strike_the_tribes }
		position = 3

		provinces_to_highlight = {
			OR = {
				area = dongola_area
				area = shendy_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			dongola_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			shendy_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			custom_tooltip = tm_eth_unlocks_mam_dip_missions
			add_stability_or_adm_power = yes
			lower_nubia_area = { add_perma_claim = yes }
			halaib_area = { add_perma_claim = yes }
			kurdufan_area = { add_perma_claim = yes }
			medwa_area = { add_perma_claim = yes }
		}
	}

	tm_eth_unified_horn = {
		icon = mission_unite_home_region
		required_missions = { tm_eth_handle_the_subjects tm_eth_unify_south_horn tm_eth_unite_the_tribes tm_eth_reclaim_suakin }
		position = 4

		provinces_to_highlight = {
			region = horn_of_africa_region
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			is_city = yes
		}

		trigger = {
			horn_of_africa_region = {
				type = all
				OR = {
					country_or_non_sovereign_subject_holds = ROOT
					is_city = no
				}
			}
		}
		
		effect = {
			custom_tooltip = tm_eth_unlocks_mali_dip_missions
			custom_tooltip = tm_eth_colonise_rest_of_horn
			add_country_modifier = {
				name = eth_lord_of_the_horn
				duration = 9125
			}
		}
	}

	tm_eth_blessed_empire = {
		icon = mission_empire
		required_missions = { tm_eth_unified_horn tm_eth_the_jewish_peoples  }
		position = 5

		provinces_to_highlight = {
			region = horn_of_africa_region
			NOT = { religion = ROOT }
		}
		
		trigger = {
			horn_of_africa_region = {
				religion = ROOT
				type = all
			}
			stability = 2
			religious_unity = 0.8
			development_in_provinces = {
				value = 1000
				religion = ROOT
			}
		}
		
		effect = {
			add_country_modifier = {
				name = eth_blessed_empire
				duration = -1
			}
		}
	}
}

ethiopia_slot_3_eco = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = ETH
			tag = AKS
			tag = BTI
		}
	}
	has_country_shield = yes

	tm_eth_eco_mission_1 = {
		icon = fund_the_monasteries
		required_missions = { }
		position = 6

		provinces_to_highlight = {
			owned_by = ROOT
			OR = {
				NOT = { has_tax_building_trigger = yes }
				NOT = { religion = ROOT }
			}
		}

		trigger = {
			num_of_owned_provinces_with = {
				value = 10
				has_tax_building_trigger = yes
				religion = ROOT
			}
		}

		effect = {
			add_country_modifier = {
				name = tm_eth_church_going_people
				duration = 3650
			}
		}
	}

	tm_eth_mountain_specialisation = {
		icon = claim_the_borderlands
		required_missions = { tm_eth_eco_mission_1 tm_eth_prepare_defenses }
		position = 7

		provinces_to_highlight = {
			OR = {
				has_terrain = mountain
				has_terrain = highlands
			}
			owned_by = ROOT
		}

		trigger = {
			OR = {
				AND = {
					num_of_owned_provinces_with = {
						value = 20
						OR = {
							has_terrain = mountain
							has_terrain = highlands
						}
						has_production_building_trigger = yes
						OR = {
							has_manufactory = yes
							base_production = 8
						}
						region = horn_of_africa_region
					}
				}
				AND = {
					num_of_owned_provinces_with = {
						value = 20
						OR = {
							has_terrain = mountain
							has_terrain = highlands
						}
						has_manpower_building_trigger = yes
						OR = {
							has_building = soldier_households
							base_manpower = 8
						}
						region = horn_of_africa_region
					}
				}
			}
		}

		effect = {
			custom_tooltip = eth_mountain_specialisations_at
			if = {
				limit = {
					num_of_owned_provinces_with = {
						value = 15
						OR = {
							has_terrain = mountain
							has_terrain = highlands
						}
						has_production_building_trigger = yes
						OR = {
							has_manufactory = yes
							base_production = 8
						}
						region = horn_of_africa_region
					}
					num_of_owned_provinces_with = {
						value = 15
						OR = {
							has_terrain = mountain
							has_terrain = highlands
						}
						has_manpower_building_trigger = yes
						OR = {
							has_building = soldier_households
							base_manpower = 8
						}
						region = horn_of_africa_region
					}
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			custom_tooltip = eth_mountain_specialisations_at_event

			custom_tooltip = mission_alternatively_tt
			custom_tooltip = eth_mountain_specialisations_bt
			if = {
				limit = {
					num_of_owned_provinces_with = {
						value = 15
						OR = {
							has_terrain = mountain
							has_terrain = highlands
						}
						has_production_building_trigger = yes
						OR = {
							has_manufactory = yes
							base_production = 8
						}
						region = horn_of_africa_region
					}
					NOT = {
						num_of_owned_provinces_with = {
							value = 15
							OR = {
								has_terrain = mountain
								has_terrain = highlands
							}
							has_manpower_building_trigger = yes
							OR = {
								has_building = soldier_households
								base_manpower = 8
							}
							region = horn_of_africa_region
						}
					}
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			custom_tooltip = tm_eth_every_mountainais_province_in_horn_tt
			tooltip = {
				add_province_modifier = {
					name = tm_eth_economic_mountains
					duration = -1
				}
			}

			custom_tooltip = mission_alternatively_tt
			custom_tooltip = eth_mountain_specialisations_ct
			if = {
				limit = {
					num_of_owned_provinces_with = {
						value = 15
						OR = {
							has_terrain = mountain
							has_terrain = highlands
						}
						has_manpower_building_trigger = yes
						OR = {
							has_building = soldier_households
							base_manpower = 8
						}
						region = horn_of_africa_region
					}
					NOT = {
						num_of_owned_provinces_with = {
							value = 15
							OR = {
								has_terrain = mountain
								has_terrain = highlands
							}
							has_production_building_trigger = yes
							OR = {
								has_manufactory = yes
								base_production = 8
							}
							region = horn_of_africa_region
						}
					}
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			custom_tooltip = tm_eth_every_mountainais_province_in_horn_tt
			tooltip = {
				add_province_modifier = {
					name = tm_eth_military_mountains
					duration = -1
				}
			}

			hidden_effect = {
				if = {
					limit = {
						num_of_owned_provinces_with = {
							value = 15
							OR = {
								has_terrain = mountain
								has_terrain = highlands
							}
							has_production_building_trigger = yes
							OR = {
								has_manufactory = yes
								base_production = 8
							}
							region = horn_of_africa_region
						}
						num_of_owned_provinces_with = {
							value = 15
							OR = {
								has_terrain = mountain
								has_terrain = highlands
							}
							has_manpower_building_trigger = yes
							OR = {
								has_building = soldier_households
								base_manpower = 8
							}
							region = horn_of_africa_region
						}
					}
					country_event = {
						id = ethiopia_flavour.2
					}
				}

				else_if = {
					limit = {
						num_of_owned_provinces_with = {
							value = 15
							OR = {
								has_terrain = mountain
								has_terrain = highlands
							}
							has_production_building_trigger = yes
							OR = {
								has_manufactory = yes
								base_production = 8
							}
							region = horn_of_africa_region
						}
					}
					set_country_flag = tm_eth_eco_mountains
					hidden_effect = {
						every_owned_province = {
							limit = {
								OR = {
									has_terrain = mountain
									has_terrain = highlands
								}
								region = horn_of_africa_region
							}
							add_province_modifier = {
								name = tm_eth_economic_mountains
								duration = -1
							}
						}
					}
				}

				else_if = {
					limit = {
						num_of_owned_provinces_with = {
							value = 15
							OR = {
								has_terrain = mountain
								has_terrain = highlands
							}
							has_manpower_building_trigger = yes
							OR = {
								has_building = soldier_households
								base_manpower = 8
							}
							region = horn_of_africa_region
						}
					}
					set_country_flag = tm_eth_mil_mountains
					hidden_effect = {
						every_owned_province = {
							limit = {
								OR = {
									has_terrain = mountain
									has_terrain = highlands
								}
								region = horn_of_africa_region
							}
							add_province_modifier = {
								name = tm_eth_military_mountains
								duration = -1
							}
						}
					}
				}
			}
		}
	}

	tm_eth_our_mountains = {
		icon = mission_nah_ravine_dwellers
		required_missions = { tm_eth_mountain_specialisation }
		position = 8

		provinces_to_highlight = {
			OR = {
				has_terrain = mountain
				has_terrain = highlands
			}
			region = horn_of_africa_region
			OR = {
				has_fort_building_trigger = no
				NOT = { development = 20 }
			}
		}

		trigger = {
			num_of_owned_provinces_with = {
				value = 15
				OR = {
					has_terrain = mountain
					has_terrain = highlands
				}
				has_fort_building_trigger = yes
				development = 20
				region = horn_of_africa_region
			}
			any_owned_province = {
				OR = {
					has_terrain = mountain
					has_terrain = highlands
				}
				region = horn_of_africa_region
				num_of_units_in_province = {
					who = ROOT
					amount = 150
				}
			}
		}

		effect = {
			add_country_modifier = {
				name = tm_eth_our_mountains_modifier
				duration = -1
			}
		}
	}
}

eth_nation_formable_3 = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		tag = ETH
	}
	has_country_shield = yes

	tm_eth_formable_placeholder = {
		icon = mission_locked_mission
		required_missions = { }
		position = 13

		provinces_to_highlight = {}

		trigger = {
			OR = {
				tag = BTI
				tag = AKS
			}
		}
		
		effect = {
			custom_tooltip = tm_eth_formable_mission_tt
		}
	}
}

aksum_slot_3 = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		tag = AKS
	}
	has_country_shield = yes

	tm_eth_aksum = {
		icon = arm_holy_sites
		required_missions = { }
		position = 13

		provinces_to_highlight = {
			OR = {
				province_id = 1227
				province_id = 1234
				province_id = 2775
				province_id = 1158
				province_id = 1196
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}

		trigger = {
			calc_true_if = {
				amount = 3
				
				owns_core_province = 1227
				owns_core_province = 1234
				owns_core_province = 2775
				owns_core_province = 1158
				owns_core_province = 1196
			}
		}
		
		effect = {
			add_stability_or_adm_power = yes
			add_country_modifier = {
				name = eth_conversion_focus
				duration = 9125
			}
			add_adm_power = 50
			add_dip_power = 50
			add_mil_power = 50
		}
	}

	tm_eth_aksum_4 = {
		icon = spread_piety
		required_missions = { tm_eth_aksum_2 tm_eth_aksum_3 }
		position = 15

		provinces_to_highlight = {
			OR = {
				province_id = 1227
				province_id = 1234
				province_id = 2775
				province_id = 1158
				province_id = 1196
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
				NOT = { religion = ROOT }
			}
		}

		trigger = {
			1227 = { owned_by = ROOT is_core = ROOT religion = ROOT }
			1234 = { owned_by = ROOT is_core = ROOT religion = ROOT }
			2775 = { owned_by = ROOT is_core = ROOT religion = ROOT }
			1158 = { owned_by = ROOT is_core = ROOT religion = ROOT }
			1196 = { owned_by = ROOT is_core = ROOT religion = ROOT }
		}
		
		effect = {
			add_country_modifier = {
				name = tm_eth_united_holy_sites
				duration = -1
			}
			add_power_projection = {
				type = 10_permanent_power_projection
				amount = 10
			}
			custom_tooltip = sca_scandinavian_european_empire_tt
			add_prestige_or_monarch_power = { amount = 100 }
		}
	}
}

semien_slot_3 = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		tag = BTI
	}
	has_country_shield = yes

	tm_eth_semien = {
		icon = the_land_of_moses
		required_missions = { }
		position = 13

		provinces_to_highlight = {
			is_capital_of = ROOT
		}

		trigger = {
			stability = 3
			army_size = 100
			devotion = 90
			NOT = { corruption = 1 }
			church_power = 100
		}
		
		effect = {
			add_adm_power = 50
			add_dip_power = 50
			add_mil_power = 50
			add_prestige_or_monarch_power = { amount = 25 }
			change_government_reform_progress = 100
			if = { limit = { NOT = { government_rank = 3 } } set_government_rank = 3 }
			add_church_power = 100
		}
	}

	tm_eth_semien_4 = {
		icon = jerusalem
		required_missions = { tm_eth_semien_2 tm_eth_semien_3 }
		position = 15

		provinces_to_highlight = {
			area = palestine_area
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { religion = ROOT }
			}
		}

		trigger = {
			palestine_area = { type = all owned_by = ROOT religion = ROOT }
		}
		
		effect = {
			custom_tooltip = tm_eth_return_to_the_homeland

			if = {
				limit = { NOT = { num_of_ruler_traits = { amount = 3 } } }
				add_ruler_personality = crusader_personality
			}
			else = {
				change_ruler_stat = {
					type = adm
					amount = 1
				}
			}

			custom_tooltip = tm_enable_crusader_personality 
			set_country_flag = tm_allows_crusader_personality
		}
	}
}


ethiopia_slot_4 = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = ETH
			tag = AKS
			tag = BTI
		}
	}
	has_country_shield = yes

	tm_eth_reclaim_the_ancient_lands = {
		icon = capture_adriatic_ports
		required_missions = { tm_eth_ready_for_conquest tm_eth_develop_the_ancestors_city }
		position = 2

		provinces_to_highlight = {
			province_id = 1230
		}

		trigger = {
			owns_core_province = 1230
			1230 = {
				religion = ROOT
				#num_of_times_improved = 5
			}
		}
		
		effect = {
			country_event = {
				id = flavor_eth.38
				tooltip = tm_eth_adulis_tt
			}
			tooltip = {
				1230 = {
					add_base_tax = 3
					add_base_production = 3
					add_base_manpower = 2
					center_of_trade = 2
				}
			}
		}
	}

	tm_eth_reclaim_suakin = {
		icon = new_pilings
		required_missions = { tm_eth_reclaim_the_ancient_lands }
		position = 3

		provinces_to_highlight = {
			province_id = 1232
		}

		trigger = {
			owns_core_province = 1232
		}
		
		effect = {
			country_event = {
				id = flavor_eth.37
				tooltip = tm_eth_suakin_tt
			}
			tooltip = {
				1232 = {
					change_religion = ROOT
					add_base_tax = 2
					add_base_production = 2
					add_base_manpower = 1
				}
			}
		}
	}
}

ethiopia_slot_4_army = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = ETH
			tag = AKS
			tag = BTI
		}
	}
	has_country_shield = yes

	tm_eth_prepare_defenses = {
		icon = mission_conquer_50_development
		required_missions = { }
		position = 6

		provinces_to_highlight = {
			owned_by = ROOT
			has_fort_building_trigger = no
			NOT = { any_neighbor_province = { has_fort_building_trigger = yes } }
		}

		trigger = {
			num_of_owned_provinces_with = {
				value = 5
				has_fort_building_trigger = yes
				region = horn_of_africa_region
			}
		}

		effect = {
			custom_tooltip = tm_eth_gain_ramparts
			hidden_effect = {
				for = {
					amount = 5
					effect = "
						random_owned_province = {
							limit = {
								has_fort_building_trigger = yes
								region = horn_of_africa_region
								NOT = { has_building = ramparts_tm }
							}
							add_building = ramparts_tm
						}
					"
				}
			}
		}
	}

	tm_eth_modernise_the_army = {
		icon = army_reforms
		required_missions = { tm_eth_mountain_specialisation tm_eth_prepare_defenses tm_eth_cawa_mission_2 }
		position = 8

		provinces_to_highlight = {}

		trigger = {
			calc_true_if = {
				amount = 3

				army_tradition = 75
				army_professionalism = 0.8
				mil_tech = 15
				mil_power = 250
				mil = 5
			}
		}

		effect = {
			if = {
				limit = {
					mil_power = 250
					NOT = {
						calc_true_if = {
							amount = 3
							
							army_tradition = 75
							army_professionalism = 0.8
							mil_tech = 15
							mil_power = 250
							mil = 5
						}
					}
				}
				add_mil_power = -250
			}
			change_technology_group = western
			change_unit_type = western
			add_country_modifier = {
				name = eth_modernized_army
				duration = 3650
			}
		}
	}
}

ethiopia_slot_rzw_dip_4 = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = ETH
			tag = AKS
			tag = BTI
		}
	}
	has_country_shield = yes

	tm_eth_open_diplomacy_with_butua = {
		icon = personal_diplomacy
		required_missions = { }
		position = 9

		provinces_to_highlight = {
			is_capital_of = event_target:butua_event_target
		}

		trigger = {
			mission_completed = tm_eth_unify_south_horn
			if = {
				limit = {
					NOT = {
						calc_true_if = {
							amount = 2

							has_country_flag = tm_eth_friendly_mal
							has_country_flag = tm_eth_friendly_to_mams
							has_country_flag = tm_eth_friendly_rzw
						}
					}
				}
				OR = {
					event_target:butua_event_target = {
						alliance_with = ROOT
						has_opinion = {
							who = ROOT
							value = 100
						}
					}
					event_target:butua_event_target = {
						has_been_insulted_by_root = yes
					}
				}
			}
			else = {
				event_target:butua_event_target = {
					has_been_insulted_by_root = yes
				}
			}
		}
		
		effect = {
			custom_tooltip = tm_eth_at_most_2_ally_paths_tt
			custom_tooltip = tm_mal_eth_dip_hostile_choice_reward_first_mission
			if = {
				limit = {
					event_target:butua_event_target = { has_been_insulted_by_root = yes }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				northern_swahili_coast_area = { add_perma_claim = yes }
				mombasa_area = { add_perma_claim = yes }
				kenya_area = { add_perma_claim = yes }
				imatong_area = { add_perma_claim = yes }
				bunyoro_area = { add_perma_claim = yes }
				uganda_area = { add_perma_claim = yes }
				buzinza_area = { add_perma_claim = yes }
				custom_tooltip = tm_eth_unlock_hostile_rzw
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = tm_mal_eth_dip_friendly_choice_reward_first_mission
			if = {
				limit = {
					event_target:butua_event_target = { alliance_with = ROOT }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				define_advisor = {
					type = diplomat
					skill = 3
					cost_multiplier = 0.33
					religion = event_target:butua_event_target
					culture = event_target:butua_event_target
				}
				custom_tooltip = tm_ally_has_effects_too
				add_historical_friend = event_target:butua_event_target
				custom_tooltip = tm_eth_unlock_friendly_rzw
			}
			hidden_effect = {
				if = {
					limit = { event_target:butua_event_target = { has_been_insulted_by_root = yes } }
					define_advisor = {
						type = army_reformer
						skill = 2
						discount = yes
						culture = ROOT
						religion = ROOT
					}
					northern_swahili_coast_area = { add_perma_claim = yes }
					mombasa_area = { add_perma_claim = yes }
					kenya_area = { add_perma_claim = yes }
					imatong_area = { add_perma_claim = yes }
					bunyoro_area = { add_perma_claim = yes }
					uganda_area = { add_perma_claim = yes }
					buzinza_area = { add_perma_claim = yes }
					set_country_flag = tm_eth_hostile_rzw
					swap_non_generic_missions = yes
				}
				else = {
					add_historical_friend = event_target:butua_event_target
					define_advisor = {
						type = diplomat
						skill = 3
						cost_multiplier = 0.33
						religion = event_target:butua_event_target
						culture = event_target:butua_event_target
					}
					event_target:butua_event_target = {
						define_advisor = {
							type = diplomat
							skill = 3
							cost_multiplier = 0.33
							religion = ROOT
							culture = ROOT
						}
					}
					set_country_flag = tm_eth_friendly_rzw
					swap_non_generic_missions = yes
				}
			}
		}
	}
}

ethiopia_slot_rzw_dip_placeholder = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = ETH
			tag = AKS
			tag = BTI
		}
		NOT = { has_country_flag = tm_eth_hostile_rzw }
		NOT = { has_country_flag = tm_eth_friendly_rzw }
	}
	has_country_shield = yes

	tm_eth_diplomacy_with_butua_placeholder_1 = {
		icon = mission_locked_mission
		required_missions = { tm_eth_open_diplomacy_with_butua }
		position = 10

		provinces_to_highlight = {}

		trigger = {
			custom_trigger_tooltip = {
				tooltip = tm_eth_rzw_dip_branching
				always = no 
			}
		}
		
		effect = {
			custom_tooltip = tm_mal_eth_dip_hostile_choice_reward
			tooltip = {
				central_swahili_coast_area = { add_perma_claim = yes }
				tanzania_area = { add_perma_claim = yes }
				buha_area = { add_perma_claim = yes }
				rwanda_area = { add_perma_claim = yes }
			}
			custom_tooltip = tm_mal_eth_dip_friendly_choice_reward
			custom_tooltip = tm_mal_eth_dip_friendly_if_we_are
			if = {
				limit = {
					NOT = { event_target:butua_event_target = { mission_completed = butua_ally_eth_path_1 } }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_eth_rzw_build_road_effect_tt
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = tm_eth_rzw_dip_friendly_if_they_have
			if = {
				limit = {
					event_target:butua_event_target = { mission_completed = butua_ally_eth_path_1 }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_eth_rzw_build_road_2_effect_tt
			}
		}
	}
	tm_eth_diplomacy_with_butua_placeholder_2 = {
		icon = mission_locked_mission
		required_missions = { tm_eth_diplomacy_with_butua_placeholder_1 }
		position = 11

		provinces_to_highlight = {}

		trigger = {
			custom_trigger_tooltip = {
				tooltip = tm_eth_rzw_dip_branching
				always = no 
			}
		}
		
		effect = {
			custom_tooltip = tm_mal_eth_dip_hostile_choice_reward
			tooltip = {
				east_africa_region = { add_perma_claim = yes }
				add_adm_power = 100
				custom_tooltip = tm_eth_unlock_africa_colonising_des
			}
			custom_tooltip = tm_mal_eth_dip_friendly_choice_reward
			custom_tooltip = tm_mal_eth_dip_friendly_if_we_are
			if = {
				limit = {
					NOT = { event_target:butua_event_target = { mission_completed = butua_ally_eth_path_2 } }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				capital_scope = {
					area = {
						add_devastation = -100
						add_prosperity = 100
					}
					add_base_manpower = 2
					add_base_production = 2
					add_base_tax = 2
				}
				custom_tooltip = tm_ally_has_effects_too
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = tm_eth_rzw_dip_friendly_if_they_have
			if = {
				limit = {
					event_target:butua_event_target = { mission_completed = butua_ally_eth_path_2 }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_any_time_we_are_allied_tt
				add_country_modifier = {
					name = butua_advisor_collab
					duration = -1
				}
				custom_tooltip = tm_ally_has_effects_too
			}
		}
	}
	tm_eth_diplomacy_with_butua_placeholder_3 = {
		icon = mission_locked_mission
		required_missions = { tm_eth_diplomacy_with_butua_placeholder_2 }
		position = 12

		provinces_to_highlight = {}

		trigger = {
			custom_trigger_tooltip = {
				tooltip = tm_eth_rzw_dip_branching
				always = no 
			}
		}
		
		effect = {
			custom_tooltip = tm_mal_eth_dip_hostile_choice_reward
			tooltip = {
				central_africa_region = { add_perma_claim = yes }
				south_africa_region = { add_perma_claim = yes }
				add_adm_power = 100
			}
			custom_tooltip = tm_mal_eth_dip_friendly_choice_reward
			custom_tooltip = tm_mal_eth_dip_friendly_if_we_are
			if = {
				limit = {
					NOT = { event_target:butua_event_target = { mission_completed = butua_ally_eth_path_3 } }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				random_owned_province = {
					limit = {
						trade_goods = gold
					}
					add_base_production = 3
					add_province_modifier = {
						name = butua_coloborating_on_gold_prov
						duration = 7300
					}
				}
				custom_tooltip = tm_ally_has_effects_too
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = tm_eth_rzw_dip_friendly_if_they_have
			if = {
				limit = {
					event_target:butua_event_target = { mission_completed = butua_ally_eth_path_3 }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_any_time_we_are_allied_tt
				add_country_modifier = {
					name = butua_coloborating_on_gold
					duration = -1
				}
				custom_tooltip = tm_ally_has_effects_too
			}
		}
	}
	tm_eth_diplomacy_with_butua_placeholder_4 = {
		icon = mission_locked_mission
		required_missions = { tm_eth_diplomacy_with_butua_placeholder_3 }
		position = 13

		provinces_to_highlight = {}

		trigger = {
			custom_trigger_tooltip = {
				tooltip = tm_eth_rzw_dip_branching
				always = no 
			}
		}
		
		effect = {
			custom_tooltip = tm_mal_eth_dip_hostile_choice_reward
			tooltip = {
				add_country_modifier = {
					name = tm_eth_conquerer_of_south_africa
					duration = -1
				}
				add_power_projection = {
					type = 10_permanent_power_projection
					amount = 10
				}
				custom_tooltip = sca_scandinavian_european_empire_tt
			}
			custom_tooltip = tm_mal_eth_dip_friendly_choice_reward
			custom_tooltip = tm_mal_eth_dip_friendly_if_we_are
			if = {
				limit = {
					NOT = { event_target:butua_event_target = { mission_completed = butua_ally_eth_path_4 } }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_any_time_we_are_allied_tt
				add_country_modifier = {
					name = butua_military_coop_with_eth
					duration = -1
				}
				custom_tooltip = tm_ally_has_effects_too
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = tm_eth_rzw_dip_friendly_if_they_have
			if = {
				limit = {
					event_target:butua_event_target = { mission_completed = butua_ally_eth_path_4 }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = butua_ally_3_tt
			}
		}
	}
}

ethiopia_slot_rzw_dip_4_hostile = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = ETH
			tag = AKS
			tag = BTI
		}
		has_country_flag = tm_eth_hostile_rzw
	}
	has_country_shield = yes

	tm_eth_diplomacy_with_rzw_hostile_1 = {
		icon = mission_retake_ceuta
		required_missions = { tm_eth_open_diplomacy_with_butua }
		position = 10

		provinces_to_highlight = {
			OR = {
				area = northern_swahili_coast_area
				area = mombasa_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 3
				OR = {
					area = northern_swahili_coast_area
					area = mombasa_area
					area = kenya_area
					area = imatong_area
					area = bunyoro_area
					area = uganda_area
					area = buzinza_area
				}
			}
		}
		
		effect = {
			central_swahili_coast_area = { add_perma_claim = yes }
			tanzania_area = { add_perma_claim = yes }
			buha_area = { add_perma_claim = yes }
			rwanda_area = { add_perma_claim = yes }
		}
	}
	tm_eth_diplomacy_with_rzw_hostile_2 = {
		icon = mission_ne_great_lakes_conquest
		required_missions = { tm_eth_diplomacy_with_rzw_hostile_1 }
		position = 11

		provinces_to_highlight = {
			OR = {
				area = central_swahili_coast_area
				area = mombasa_area
				area = northern_swahili_coast_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 7
				OR = {
					area = northern_swahili_coast_area
					area = mombasa_area
					area = kenya_area
					area = imatong_area
					area = bunyoro_area
					area = uganda_area
					area = buzinza_area
					area = central_swahili_coast_area
				}
			}
		}
		
		effect = {
			east_africa_region = { add_perma_claim = yes }
			add_adm_power = 100
			custom_tooltip = tm_eth_unlock_africa_colonising_des
		}
	}
	tm_eth_diplomacy_with_rzw_hostile_3 = {
		icon = mission_se_medicine_wheel
		required_missions = { tm_eth_diplomacy_with_rzw_hostile_2 }
		position = 12

		provinces_to_highlight = {
			region = east_africa_region
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 20
				region = east_africa_region
			}
		}
		
		effect = {
			central_africa_region = { add_perma_claim = yes }
			south_africa_region = { add_perma_claim = yes }
			add_adm_power = 100
		}
	}
	tm_eth_diplomacy_with_rzw_hostile_4 = {
		icon = mission_sw_against_the_desert
		required_missions = { tm_eth_diplomacy_with_rzw_hostile_3 }
		position = 13

		provinces_to_highlight = {
			OR = {
				region = east_africa_region
				region = central_africa_region
				region = south_africa_region
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 50
				OR = {
					region = east_africa_region
					region = central_africa_region
					region = south_africa_region
				}
			}
		}
		
		effect = {
			add_country_modifier = {
				name = tm_eth_conquerer_of_south_africa
				duration = -1
			}
			add_power_projection = {
				type = 10_permanent_power_projection
				amount = 10
			}
			custom_tooltip = sca_scandinavian_european_empire_tt
		}
	}
}

ethiopia_slot_rzw_dip_4_friendly = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = ETH
			tag = AKS
			tag = BTI
		}
		has_country_flag = tm_eth_friendly_rzw
	}
	has_country_shield = yes

	tm_eth_diplomacy_with_rzw_friendly_1 = {
		icon = mission_pue_chaco_roads
		required_missions = { tm_eth_open_diplomacy_with_butua }
		position = 10

		provinces_to_highlight = {
			OR = {
				province_id = 1224
				province_id = 1214
				province_id = 2791
				province_id = 2761
				province_id = 1210
				province_id = 2779
				province_id = 2781
				province_id = 2777
				province_id = 2774
				province_id = 2796
				province_id = 1204
				province_id = 1203
				province_id = 1202
				province_id = 1200
				province_id = 1199
				province_id = 1197
				province_id = 1196
				province_id = 1198
				province_id = 4036
				province_id = 4037
				province_id = 4040
				province_id = 4039
				province_id = 1191
				province_id = 1188
				province_id = 1185
			}
			#OR = {
			#	NOT = { country_or_non_sovereign_subject_holds = ROOT }
			#	NOT = { country_or_non_sovereign_subject_holds = event_target:butua_event_target }
			#	NOT = { num_of_times_improved = 1 }
			#	NOT = { num_of_buildings_in_province = 1 }
			#}
			#NOT = {
			#	OR = {
			#		country_or_non_sovereign_subject_holds = ROOT
			#		country_or_non_sovereign_subject_holds = event_target:butua_event_target
			#		num_of_times_improved = 1
			#		num_of_buildings_in_province = 1
			#	}
			#}
		}

		trigger = {
			event_target:butua_event_target = {
				alliance_with = ROOT
				has_opinion = {
					who = ROOT
					value = 125
				}
				trust = {
					who = ROOT
					value = 75
				}
			}
			custom_trigger_tooltip = {
				tooltip = tm_eth_road_to_butua_tt_1
				1224 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:butua_event_target } }
				1214 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:butua_event_target } }
				2791 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:butua_event_target } }
				2761 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:butua_event_target } }
				1210 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:butua_event_target } }
				2779 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:butua_event_target } }
				2781 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:butua_event_target } }
				2777 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:butua_event_target } }
				2774 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:butua_event_target } }
				2796 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:butua_event_target } }
				1204 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:butua_event_target } }
				1203 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:butua_event_target } }
				1202 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:butua_event_target } }
				1200 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:butua_event_target } }
				1199 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:butua_event_target } }
				1197 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:butua_event_target } }
				1196 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:butua_event_target } }
				1198 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:butua_event_target } }
				4036 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:butua_event_target } }
				4037 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:butua_event_target } }
				4040 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:butua_event_target } }
				4039 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:butua_event_target } }
				1191 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:butua_event_target } }
				1188 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:butua_event_target } }
				1185 = { OR = { country_or_non_sovereign_subject_holds = ROOT country_or_non_sovereign_subject_holds = event_target:butua_event_target } }
			}
			custom_trigger_tooltip = {
				tooltip = tm_eth_road_to_butua_tt_2
				1224 = { OR = { num_of_times_improved = 1 num_of_buildings_in_province = 1 } }
				1214 = { OR = { num_of_times_improved = 1 num_of_buildings_in_province = 1 } }
				2791 = { OR = { num_of_times_improved = 1 num_of_buildings_in_province = 1 } }
				2761 = { OR = { num_of_times_improved = 1 num_of_buildings_in_province = 1 } }
				1210 = { OR = { num_of_times_improved = 1 num_of_buildings_in_province = 1 } }
				2779 = { OR = { num_of_times_improved = 1 num_of_buildings_in_province = 1 } }
				2781 = { OR = { num_of_times_improved = 1 num_of_buildings_in_province = 1 } }
				2777 = { OR = { num_of_times_improved = 1 num_of_buildings_in_province = 1 } }
				2774 = { OR = { num_of_times_improved = 1 num_of_buildings_in_province = 1 } }
				2796 = { OR = { num_of_times_improved = 1 num_of_buildings_in_province = 1 } }
				1204 = { OR = { num_of_times_improved = 1 num_of_buildings_in_province = 1 } }
				1203 = { OR = { num_of_times_improved = 1 num_of_buildings_in_province = 1 } }
				1202 = { OR = { num_of_times_improved = 1 num_of_buildings_in_province = 1 } }
				1200 = { OR = { num_of_times_improved = 1 num_of_buildings_in_province = 1 } }
				1199 = { OR = { num_of_times_improved = 1 num_of_buildings_in_province = 1 } }
				1197 = { OR = { num_of_times_improved = 1 num_of_buildings_in_province = 1 } }
				1196 = { OR = { num_of_times_improved = 1 num_of_buildings_in_province = 1 } }
				1198 = { OR = { num_of_times_improved = 1 num_of_buildings_in_province = 1 } }
				4036 = { OR = { num_of_times_improved = 1 num_of_buildings_in_province = 1 } }
				4037 = { OR = { num_of_times_improved = 1 num_of_buildings_in_province = 1 } }
				4040 = { OR = { num_of_times_improved = 1 num_of_buildings_in_province = 1 } }
				4039 = { OR = { num_of_times_improved = 1 num_of_buildings_in_province = 1 } }
				1191 = { OR = { num_of_times_improved = 1 num_of_buildings_in_province = 1 } }
				1188 = { OR = { num_of_times_improved = 1 num_of_buildings_in_province = 1 } }
				1185 = { OR = { num_of_times_improved = 1 num_of_buildings_in_province = 1 } }
			}
		}
		
		effect = {
			custom_tooltip = tm_mal_eth_dip_friendly_if_we_are
			if = {
				limit = {
					NOT = { event_target:butua_event_target = { mission_completed = butua_ally_eth_path_1 } }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_eth_rzw_build_road_effect_tt
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = tm_eth_rzw_dip_friendly_if_they_have
			if = {
				limit = {
					event_target:butua_event_target = { mission_completed = butua_ally_eth_path_1 }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_eth_rzw_build_road_2_effect_tt
			}
			hidden_effect = {
				if = {
					limit = { NOT = { event_target:butua_event_target = { mission_completed = butua_ally_eth_path_1 } } }
					1224 = { add_building = road }
					1214 = { add_building = road }
					2791 = { add_building = road }
					2761 = { add_building = road }
					1210 = { add_building = road }
					2779 = { add_building = road }
					2781 = { add_building = road }
					2777 = { add_building = road }
					2774 = { add_building = road }
					2796 = { add_building = road }
					1204 = { add_building = road }
					1203 = { add_building = road }
					1202 = { add_building = road }
					1200 = { add_building = road }
					1199 = { add_building = road }
					1197 = { add_building = road }
					1196 = { add_building = road }
					1198 = { add_building = road }
					4036 = { add_building = road }
					4037 = { add_building = road }
					4040 = { add_building = road }
					4039 = { add_building = road }
					1191 = { add_building = road }
					1188 = { add_building = road }
					1185 = { add_building = road }
				}
				if = {
					limit = { event_target:butua_event_target = { mission_completed = butua_ally_eth_path_1 } }
					1224 = { add_building = highway }
					1214 = { add_building = highway }
					2791 = { add_building = highway }
					2761 = { add_building = highway }
					1210 = { add_building = highway }
					2779 = { add_building = highway }
					2781 = { add_building = highway }
					2777 = { add_building = highway }
					2774 = { add_building = highway }
					2796 = { add_building = highway }
					1204 = { add_building = highway }
					1203 = { add_building = highway }
					1202 = { add_building = highway }
					1200 = { add_building = highway }
					1199 = { add_building = highway }
					1197 = { add_building = highway }
					1196 = { add_building = highway }
					1198 = { add_building = highway }
					4036 = { add_building = highway }
					4037 = { add_building = highway }
					4040 = { add_building = highway }
					4039 = { add_building = highway }
					1191 = { add_building = highway }
					1188 = { add_building = highway }
					1185 = { add_building = highway }
				}
			}
		}
	}
	tm_eth_diplomacy_with_rzw_friendly_2 = {
		icon = bibliotheca_corviana
		required_missions = { tm_eth_diplomacy_with_rzw_friendly_1 }
		position = 11

		provinces_to_highlight = {}

		trigger = {
			event_target:butua_event_target = {
				alliance_with = ROOT
				has_opinion = {
					who = ROOT
					value = 125
				}
			}
			capital_scope = {
				development = 20
			}
			has_adm_advisor_2 = yes
			has_dip_advisor_2 = yes
			has_mil_advisor_2 = yes
		}
		
		effect = {
			custom_tooltip = tm_mal_eth_dip_friendly_if_we_are
			if = {
				limit = {
					NOT = { event_target:butua_event_target = { mission_completed = butua_ally_eth_path_2 } }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				capital_scope = {
					area = {
						add_devastation = -100
						add_prosperity = 100
					}
					add_base_manpower = 2
					add_base_production = 2
					add_base_tax = 2
				}
				custom_tooltip = tm_ally_has_effects_too
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = tm_eth_rzw_dip_friendly_if_they_have
			if = {
				limit = {
					event_target:butua_event_target = { mission_completed = butua_ally_eth_path_2 }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_any_time_we_are_allied_tt
				add_country_modifier = {
					name = butua_advisor_collab
					duration = -1
				}
				custom_tooltip = tm_ally_has_effects_too
			}
			hidden_effect = {
				if = {
					limit = { NOT = { event_target:butua_event_target = { mission_completed = butua_ally_eth_path_2 } } }
					capital_scope = {
						area = {
							add_devastation = -100
							add_prosperity = 100
						}
						add_base_manpower = 2
						add_base_production = 2
						add_base_tax = 2
					}
					event_target:butua_event_target = {
						capital_scope = {
							area = {
								add_devastation = -100
								add_prosperity = 100
							}
							add_base_manpower = 2
							add_base_production = 2
							add_base_tax = 2
						}
					}
				}
				if = {
					limit = { event_target:butua_event_target = { mission_completed = butua_ally_eth_path_2 } }
					add_country_modifier = {
						name = butua_advisor_collab
						duration = -1
					}
					set_country_flag = tm_eth_rzw_advisor_collab_flag
					event_target:butua_event_target = {
						add_country_modifier = {
							name = butua_advisor_collab
							duration = -1
						}
						set_country_flag = tm_eth_rzw_advisor_collab_flag
					}
				}
			}
		}
	}
	tm_eth_diplomacy_with_rzw_friendly_3 = {
		icon = mission_entrepot_of_india
		required_missions = { tm_eth_diplomacy_with_rzw_friendly_2 }
		position = 12

		provinces_to_highlight = {}

		trigger = {
			event_target:butua_event_target = {
				alliance_with = ROOT
				has_opinion = {
					who = ROOT
					value = 125
				}
			}
			num_of_owned_provinces_with = {
				value = 2
				trade_goods = gold
				base_production = 12
			}
		}
		
		effect = {
			custom_tooltip = tm_mal_eth_dip_friendly_if_we_are
			if = {
				limit = {
					NOT = { event_target:butua_event_target = { mission_completed = butua_ally_eth_path_3 } }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				random_owned_province = {
					limit = {
						trade_goods = gold
					}
					add_base_production = 3
					add_province_modifier = {
						name = butua_coloborating_on_gold_prov
						duration = 7300
					}
				}
				custom_tooltip = tm_ally_has_effects_too
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = tm_eth_rzw_dip_friendly_if_they_have
			if = {
				limit = {
					event_target:butua_event_target = { mission_completed = butua_ally_eth_path_3 }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_any_time_we_are_allied_tt
				add_country_modifier = {
					name = butua_coloborating_on_gold
					duration = -1
				}
				custom_tooltip = tm_ally_has_effects_too
			}
			hidden_effect = {
				if = {
					limit = { NOT = { event_target:butua_event_target = { mission_completed = butua_ally_eth_path_3 } } }
					random_owned_province = {
						limit = {
							trade_goods = gold
						}
						add_base_production = 3
						add_province_modifier = {
							name = butua_coloborating_on_gold_prov
							duration = 7300
						}
					}
					event_target:butua_event_target = {
						random_owned_province = {
							limit = {
								trade_goods = gold
							}
							add_base_production = 3
							add_province_modifier = {
								name = butua_coloborating_on_gold_prov
								duration = 7300
							}
						}
					}
				}
				if = {
					limit = { event_target:butua_event_target = { mission_completed = butua_ally_eth_path_3 } }
					add_country_modifier = {
						name = butua_coloborating_on_gold
						duration = -1
					}
					set_country_flag = tm_eth_rzw_gold_collab_flag
					event_target:butua_event_target = {
						add_country_modifier = {
							name = butua_coloborating_on_gold
							duration = -1
						}
						set_country_flag = tm_eth_rzw_gold_collab_flag
					}
				}
			}
		}
	}
	tm_eth_diplomacy_with_rzw_friendly_4 = {
		icon = sav_union_with_naples
		required_missions = { tm_eth_diplomacy_with_rzw_friendly_3 }
		position = 12

		provinces_to_highlight = {}

		trigger = {
			event_target:butua_event_target = {
				alliance_with = ROOT
				has_opinion = {
					who = ROOT
					value = 125
				}
			}
			army_size = 50
			army_size_percentage = 0.8
			army_professionalism = 0.10
			num_of_generals = 2
		}
		
		effect = {
			custom_tooltip = tm_mal_eth_dip_friendly_if_we_are
			if = {
				limit = {
					NOT = { event_target:butua_event_target = { mission_completed = butua_ally_eth_path_4 } }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = tm_any_time_we_are_allied_tt
				add_country_modifier = {
					name = butua_military_coop_with_eth
					duration = -1
				}
				custom_tooltip = tm_ally_has_effects_too
			}
			custom_tooltip = mission_alternatively_tt
			custom_tooltip = tm_eth_rzw_dip_friendly_if_they_have
			if = {
				limit = {
					event_target:butua_event_target = { mission_completed = butua_ally_eth_path_4 }
				}
				custom_tooltip = BONUS_REWARD_YES
			}
			else = { custom_tooltip = BONUS_REWARD_NO }
			tooltip = {
				custom_tooltip = butua_ally_3_tt
			}
			hidden_effect = {
				if = {
					limit = { NOT = { event_target:butua_event_target = { mission_completed = butua_ally_eth_path_4 } } }
					add_country_modifier = {
						name = butua_military_coop_with_eth
						duration = -1
					}
					set_country_flag = tm_eth_rzw_military_cooperation_flag
					event_target:butua_event_target = {
						add_country_modifier = {
							name = butua_military_coop_with_eth
							duration = -1
						}
						set_country_flag = tm_eth_rzw_military_cooperation_flag
					}
				}
				if = {
					limit = { event_target:butua_event_target = { mission_completed = butua_ally_eth_path_4 } }
					set_country_flag = butua_military_coop_but_eth
					event_target:butua_event_target = { set_country_flag = butua_military_coop_but_eth }
				}
			}
		}
	}
}

aksum_slot_4 = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		tag = AKS
	}
	has_country_shield = yes

	tm_eth_aksum_3 = {
		icon = counter_reformation
		required_missions = { tm_eth_aksum }
		position = 14

		provinces_to_highlight = {
			is_capital_of = ROOT
		}

		trigger = {
			employed_advisor = {
				category = ADM
				religion = ROOT
			}
			has_adm_advisor_3 = yes
			employed_advisor = {
				category = DIP
				religion = ROOT
			}
			has_dip_advisor_3 = yes
			employed_advisor = {
				category = MIL
				religion = ROOT
			}
			has_mil_advisor_3 = yes
		}
		
		effect = {
			custom_tooltip = tm_eth_aks_coptic_safehave_tt
			set_country_flag = tm_advisor_religion_dev_chance
			add_country_modifier = {
				name = tm_eth_coptic_safehaven
				duration = -1
			}
		}
	}
}

semien_slot_4 = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		tag = BTI
	}
	has_country_shield = yes

	tm_eth_semien_3 = {
		icon = per_protect_the_west_iranian
		required_missions = { tm_eth_semien }
		position = 14

		provinces_to_highlight = {
			owned_by = ROOT
			NOT = { religion = jewish }
		}

		trigger = {
			employed_advisor = {
				category = ADM
				religion = ROOT
			}
			has_adm_advisor_3 = yes
			employed_advisor = {
				category = DIP
				religion = ROOT
			}
			has_dip_advisor_3 = yes
			employed_advisor = {
				category = MIL
				religion = ROOT
			}
			has_mil_advisor_3 = yes
			development_in_provinces = {
				value = 1000
				religion = jewish
			}
		}
		
		effect = {
			add_country_modifier = {
				name = tm_eth_promote_jewish_culture
				duration = -1
			}
		}
	}
}


ethiopia_slot_5 = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = ETH
			tag = AKS
			tag = BTI
		}
	}
	has_country_shield = yes

	tm_eth_develop_the_ancestors_city = {
		icon = conquer_tuscany
		required_missions = {  }
		position = 1

		provinces_to_highlight = {
			province_id = 1227
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
				NOT = { num_of_times_improved = 5 }
			}
		}

		trigger = {
			1227 = {
				is_core = ROOT
				owned_by = ROOT
				num_of_times_improved = 5
			}
		}

		effect = {
			1227 = {
				add_building_construction = {
					building = cathedral
					speed = 1
					cost = 0
				}
				if = {
					limit = {
						NOT = { 
							has_great_project = {
								type = obelisk_of_axum
								tier = 2
							}
						}
					}
					add_great_project_tier = {
						type = obelisk_of_axum
						tier = 1
					}
					custom_tooltip = tm_upgrades_great_project_up_to_tier_2_tt
				}
				else = {
					random_list = {
						1 = { add_base_tax = 4 }
						1 = { add_base_production = 4 }
						1 = { add_base_manpower = 4 }
					}
				}
			}
		}
	}

	tm_eth_establish_a_permanent_capital = {
		icon = mission_zim_strong_rulership
		required_missions = { tm_eth_develop_the_ancestors_city }
		position = 4

		provinces_to_highlight = {
			province_id = 1224
		}

		trigger = {
			reform_level = 5
			1224 = { is_core = ROOT	}
			1224 = { owned_by = ROOT }
			1224 = { development = 30 }
			1224 = { num_of_buildings_in_province = 5 }
			1224 = { num_of_times_expanded_infrastructure = 2 }
			1224 = { has_tax_building_trigger = yes }
			1224 = { has_courthouse_building_trigger = yes }
			1224 = { has_fort_building_trigger = yes }
			1224 = { has_manufactory = yes }
		}

		effect = {
			1224 = {
				if = {
					limit = { NOT = { is_capital_of = ROOT }}
					set_capital = THIS	
				}
			}
			set_country_flag = tm_eth_fasil_ghebbi_building
			1224 = {
				add_great_project = {
					type = fasil_ghebbi
					instant = yes
				}
			}
			custom_tooltip = tm_blank_line
			if = {
				limit = {
					NOT = { religion = jewish }
				}
				set_country_flag = unlocked_solomid_empire_reform
				country_event = {
					id = flavor_eth.30
					tooltip = tm_eth_reform_the_negusa_government_tt
				}
				tooltip = {
					add_government_reform = solomonic_empire
				}
			}
			else = {
				if = {
					limit = {
						NOT = { tag = BTI }
					}
					custom_tooltip = tm_perm_capital_sem_tt
					tooltip = {
						add_government_reform = semien_governement_reform
					}
				}
				else = {
					set_country_flag = tm_unlocked_semien_governement_reform
					add_government_reform = semien_governement_reform
				}
			}
			#remove_country_modifier = eth_negusa_nagast_issues
		}
	}

	tm_eth_become_an_empire = {
		icon = mission_monarch_in_throne_room
		required_missions = { tm_eth_establish_a_permanent_capital }
		position = 5

		provinces_to_highlight = {
			
		}

		trigger = {	
			total_development = 800
			land_forcelimit = 150
			monthly_income = 120
		}

		effect = {
			if = {
				limit = { NOT = { government_rank = 3 } }
				set_government_rank = 3
			}
			else = {
				add_prestige_or_monarch_power = { amount = 50 }
				add_power_projection = { 
					type = mission_rewards_power_projection
					amount = 15
				}
			}
			if = {
				limit = { NOT = { num_of_ruler_traits = { amount = 3 } } }
				add_ruler_personality = lawgiver_personality
			}
			change_ruler_stat = {
				type = adm
				amount = 1
			}
			custom_tooltip = egy_better_traits_rulers_tt
			set_country_flag = egypt_better_traits_flag
		}
	}
}

ethiopia_slot_5_cawa = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = ETH
			tag = AKS
			tag = BTI
		}
	}
	has_country_shield = yes

	tm_eth_cawa_mission_1 = {
		icon = mission_kon_conquer_ksj
		required_missions = { }
		position = 6

		provinces_to_highlight = {}

		trigger = {
			if = {
				limit = { NOT = { Tag = BTI } }
				num_of_cawa = 35
			}			
			army_professionalism = 0.2
			army_tradition = 40
			num_of_generals = 2
		}

		effect = {
			define_advisor = {
				type = army_reformer
				skill = 2
				culture = ROOT
				religion = ROOT
				cost_multiplier = 0.25
			}
			if = {
				limit = { NOT = { tag = BTI }}
				country_event = {
					id = ethiopia_flavour.1
					tooltip = tm_eth_cawa_role_event_tt
				}
			}
			
		}
	}

	tm_eth_cawa_mission_2 = {
		icon = mission_son_military_expertise
		required_missions = { tm_eth_cawa_mission_1 }
		position = 7

		provinces_to_highlight = {}

		trigger = {
			if = {
				limit = {
					NOT = {
						OR = {
							has_country_flag = tm_eth_quantity_cawa
							has_country_flag = tm_eth_quality_cawa
						}
					}
					NOT = { tag = BTI }
				}
				custom_trigger_tooltip = {
					tooltip = tm_eth_chosen_quantity_cawa_requirements
					has_country_flag = tm_eth_quantity_cawa
				}
				custom_trigger_tooltip = {
					tooltip = tm_eth_chosen_quality_cawa_requirements
					has_country_flag = tm_eth_quality_cawa
				}
			}
			else_if = {
				limit = {
					has_country_flag = tm_eth_quantity_cawa
					NOT = { tag = BTI }
				}
				num_of_cawa = 150
				num_of_generals = 5
				land_forcelimit = 200
				OR = {
					army_size_percentage = 0.8
					army_size = 250
				}
			}
			else_if = {
				limit = {
					has_country_flag = tm_eth_quality_cawa
					NOT = { tag = BTI }
				}
				custom_trigger_tooltip = {
					tooltip = tm_50_cawa_drilled
					num_of_cawa = 50
					num_of_regiments_at_full_drill = 50
				}
				army_professionalism = 0.5
				army_tradition = 60
				has_commanding_three_star = yes
			}
			else = {
				army_size_percentage = 0.8
				army_professionalism = 0.5
				army_tradition = 60
				has_commanding_three_star = yes
			}
		}

		effect = {
			if = {
				limit = {
					NOT = {
						OR = {
							has_country_flag = tm_eth_quantity_cawa
							has_country_flag = tm_eth_quality_cawa
						}
					}
					NOT = { tag = BTI }
				}
				custom_tooltip = tm_eth_chosen_quantity_cawa
				tooltip = {
					add_country_modifier = {
						name = eth_lots_of_cawa
						duration = -1
					}
					add_country_modifier = {
						name = eth_lots_of_cawa_cawa
						duration = -1
					}
				}
				custom_tooltip = mission_alternatively_tt
				custom_tooltip = tm_eth_chosen_quality_cawa
				tooltip = {
					add_country_modifier = {
						name = eth_specialised_cawa
						duration = -1
					}
					add_country_modifier = {
						name = eth_specialised_cawa_cawa
						duration = -1
					}
				}
			}
			else_if = {
				limit = {
					has_country_flag = tm_eth_quantity_cawa
					NOT = { tag = BTI }
				}
				add_country_modifier = {
					name = eth_lots_of_cawa
					duration = -1
				}
				add_country_modifier = {
					name = eth_lots_of_cawa_cawa
					duration = -1
				}
			}
			else_if = {
				limit = {
					has_country_flag = tm_eth_quality_cawa
					NOT = { tag = BTI }
				}
				add_country_modifier = {
					name = eth_specialised_cawa
					duration = -1
				}
				add_country_modifier = {
					name = eth_specialised_cawa_cawa
					duration = -1
				}
			}
			else = {
				add_army_professionalism = 0.1
				add_army_tradition = 10
			}
		}
	}

	tm_eth_cawa_mission_3 = {
		icon = mission_cannons_firing
		required_missions = { tm_eth_cawa_mission_2 }
		position = 8

		provinces_to_highlight = {}

		trigger = {
			num_of_artillery = 50
			if = {
				limit = { NOT = { tag = BTI } }
				custom_trigger_tooltip = {
					tooltip = tm_eth_artillery_battles_won_tt
					check_variable = {
						which = tm_eth_artillery_battles_won
						value = 15
					}
				}
			}			
			mil_tech = 13
			artillery_bearer = 4
		}

		effect = {
			if = {
				limit = { NOT = { tag = BTI } }
					add_country_modifier = {
					name = tm_eth_modernise_cawa
					duration = -1
				}
			}
			else = {
				define_advisor = {
					type = artillery_bearer
					skill = 3
					culture = ROOT
					religion = ROOT
					cost_multiplier = 0.25
				}
				add_army_professionalism = 0.05
				add_army_tradition = 10
			}
		}
	}
}

ethiopia_slot_eastern_expansion = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = ETH
			tag = AKS
			tag = BTI
		}
	}
	has_country_shield = yes

	tm_eth_prepare_to_cross_the_strait = {
		icon = yem_unite_yemen
		required_missions = { }
		position = 9

		provinces_to_highlight = {
			has_port = yes
			country_or_non_sovereign_subject_holds = ROOT
			region = horn_of_africa_region
		}

		trigger = {
			mission_completed = tm_eth_deal_with_adal
			navy_size = 5
		}
		
		effect = {
			tihama_al_yemen_area = { add_perma_claim = yes }
			yemen_area = { add_perma_claim = yes }
			upper_yemen_area = { add_perma_claim = yes }
		}
	}

	tm_eth_eastern_expansion_1 = {
		icon = mission_portuguese_oman
		required_missions = { tm_eth_prepare_to_cross_the_strait }
		position = 10

		provinces_to_highlight = {
			OR = {
				area = tihama_al_yemen_area
				area = yemen_area
				area = upper_yemen_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 5
				OR = {
					area = tihama_al_yemen_area
					area = yemen_area
					area = upper_yemen_area
				}
			}
		}
		
		effect = {
			asir_area = { add_perma_claim = yes }
			hadramut_area = { add_perma_claim = yes }
			mecca_area = { add_perma_claim = yes }
			mahra_area = { add_perma_claim = yes }
		}
	}

	tm_eth_eastern_expansion_2 = {
		icon = mission_afghan_frontier
		required_missions = { tm_eth_eastern_expansion_1 }
		position = 11

		provinces_to_highlight = {
			OR = {
				area = tihama_al_yemen_area
				area = yemen_area
				area = upper_yemen_area
				area = asir_area
				area = hadramut_area
				area = mecca_area
				area = mahra_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 20
				region = arabia_region
			}
		}
		
		effect = {
			arabia_region = { add_perma_claim = yes }
		}
	}

	tm_eth_eastern_expansion_3 = {
		icon = boh_humiliate_austria
		required_missions = { tm_eth_eastern_expansion_2 }
		position = 12

		provinces_to_highlight = {
			OR = {
				AND = {
					region = arabia_region
					ROOT = {
						NOT = {
							num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
								value = 35
								region = arabia_region
							}
						}
					}
				}
				province_id = 400
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 35
				region = arabia_region
			}
			400 = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		effect = {
			add_prestige_or_monarch_power = { amount = 50 }
			add_country_modifier = {
				name = tm_eth_conquest_of_oman
				duration = 9125
			}
			add_mercantilism = 5
		}
	}

	tm_eth_eastern_expansion_4 = {
		icon = arb_unite_arabia
		required_missions = { tm_eth_eastern_expansion_3 }
		position = 13

		provinces_to_highlight = {
			region = arabia_region
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 50
				region = arabia_region
			}
		}
		
		effect = {
			add_country_modifier = {
				name = tm_eth_conquerer_of_arabia
				duration = -1
			}
			add_power_projection = {
				type = 10_permanent_power_projection
				amount = 10
			}
			custom_tooltip = sca_scandinavian_european_empire_tt
		}
	}
}