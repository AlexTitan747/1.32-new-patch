# province
on_adm_development = {
	hidden_effect = {
		owner = {
			change_variable = {
				which = admClicks
				value = 1
			}
			change_variable = {
				which = devsumClicks
				value = 1
			}
		}
	}
}

# province
on_dip_development = {
	hidden_effect = {
		owner = {
			change_variable = {
				which = dipClicks
				value = 1
			}
			change_variable = {
				which = devsumClicks
				value = 1
			}
		}
	}
}

# province
on_mil_development = {
	hidden_effect = {
		owner = {
			change_variable = {
				which = milClicks
				value = 1
			}
			change_variable = {
				which = devsumClicks
				value = 1
			}
		}
	}
}

on_war_won = {
	FROM = { country_event = { id = flavor_cri.6 } }
	ROOT = { country_event = { id = tributary_events.32 } }
	
	if = {
		limit = {
			is_part_of_hre = yes
			FROM  = { is_part_of_hre = yes }
		}
		ROOT = { save_global_event_target_as = hre_winner }
		FROM = { save_global_event_target_as = hre_loser }
		random_known_country = {
			limit = {
				has_reform = free_city
				NOT = {
					prestige = 40
				}
				NOT = {
					has_country_modifier = fc_treatyconference_timer
				}
			}
			add_country_modifier = {
				name = fc_treatyconference_timer
				duration = 3650
				hidden = yes
			}
			country_event = {
				id = free_cities.7
				days = 7
			}
		}
	}

	if = {
		limit = {
			tag = MLO
			NOT = { has_country_flag = emp_mlo_won_war_with_swiss_mercs }
			any_hired_mercenary_company = {
				home_province = {
					OR = {
						area = switzerland_area
						area = romandie_area
					}
				}
			}
		}
		set_country_flag = emp_mlo_won_war_with_swiss_mercs
	}
	
	if = {
		limit = {
			is_hiring_condottiere_from = SWI
		}
		SWI = { set_country_flag = won_condottiere_war }
		if = {
			limit = {
				tag = PAP
			}
			SWI = {
				set_country_flag = hired_to_pope
			}
		}
	}
	
	if = {
		limit = {
			primary_culture = melanesian
			NOT = { has_country_modifier = warlord_mod }
		}
		FROM = {
			country_event = {
				id = polynesian.17
			}
		}
	}
	if = {
		limit = {
			ROOT = {
				religion = jewish
				has_church_aspect = judaism_purim_teachings_aspect
			}
		}
		add_church_power = 10
	}
	hidden_effect = {
		change_variable = {
			which = warsWon
			value = 1
		}
	}
}

on_war_lost = {
	ROOT = { country_event = { id = flavor_cri.6 } }
	ROOT = { country_event = { id = tributary_events.32 } }
	if = {
        limit = {
            government = republic
            is_lesser_in_union = yes
		}
		change_government_to_monarchy = yes
    }
	if = {
		limit = {
			FROM = { is_emperor = yes }
			NOT = { has_country_flag = reined_in_for_shadow_kingdom }
			NOT = { has_global_flag = italians_leave_hre }
			is_emperor = no
			is_part_of_hre = yes
			OR = {
				capital_scope = { region = italy_region }
				AND = {
					culture_group = latin
					any_owned_province = {
						region = italy_region
					}
				}
			}
		}
		set_country_flag = reined_in_for_shadow_kingdom
	}
	add_country_modifier = {
		name = just_lost_war_timer
		duration = 10
		hidden = yes
	}
	if = {
        limit = {
            has_reform = celestial_empire
		}
		add_mandate = -5
    }
	hidden_effect = {
		change_variable = {
			which = warsLost
			value = 1
		}
	}
}

# country
# root = winning country, from = loser country
on_battle_won_country = {
	if = {
		limit = {
			ROOT = {
				tag = ALB
				NOT = { has_country_flag = albanian_victory }
			}
			FROM = {
				tag = TUR
			}
		}
		ROOT = { set_country_flag = albanian_victory }
	}
	if = {
		limit = {
			ROOT = {
				religion = jewish
				has_church_aspect = judaism_purim_teachings_aspect
			}
		}
		ROOT = {
			add_war_exhaustion = -0.05
		}
	}
	hidden_effect = {
		change_variable = {
			which = battlesWon
			value = 1
		}
	}
}

# country
# root = loser country, from = winner country
on_battle_lost_country = {
	battle_cult_spreading_effect = yes #Scripted effect for fetishist cult mechanics.
	random_events = {
		90 = 0
		10 = friendship_events.1 #Historical Friendship Broken
	}
	hidden_effect = {
		change_variable = {
			which = battlesLost
			value = 1
		}
	}
}

on_loan_repaid = {
	on_loan_repaid_estate_privileges_effect = yes
	hidden_effect = {
		change_variable = {
			which = loanRepaid
			value = 1
		}
	}
}

on_bankruptcy = {
	hidden_effect = {
		change_variable = {
			which = bankruptcyNum
			value = 1
		}
	}
}

on_hre_wins_defensive_war = {
	events = {
	}
	add_imperial_influence = 5
}